<!DOCTYPE html>
<!-- saved from url=(0049)https://forum.arduino.cc/index.php?topic=282341.0 -->
<html class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/privacy-modal.css"><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/newsletter-modal.css"><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/footer.css"><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/header.css">
	
	<link rel="stylesheet" type="text/css" href="./Stack Cost, Inline, and Compiler Optimization_files/index.css">
	<link rel="stylesheet" type="text/css" href="./Stack Cost, Inline, and Compiler Optimization_files/responsive.css">
	<link rel="stylesheet" type="text/css" href="./Stack Cost, Inline, and Compiler Optimization_files/jquery.sceditor.css">
	<style>
img.avatar { max-width: 65px; max-height: 65px; }</style>
	<script><!-- // --><![CDATA[
		var smf_theme_url = "https://forum.arduino.cc/Themes/default";
		var smf_default_theme_url = "https://forum.arduino.cc/Themes/default";
		var smf_images_url = "https://forum.arduino.cc/Themes/default/images";
		var smf_smileys_url = "https://forum.arduino.cc/Smileys";
		var smf_scripturl = "https://forum.arduino.cc/index.php";
		var smf_iso_case_folding = false;
		var smf_charset = "UTF-8";
		var smf_session_id = "39a67480e90d202a2440564025713d6c";
		var smf_session_var = "d35284f53db8";
		var smf_member_id;
		var ajax_notification_text = 'Loading...';
		var help_popup_heading_text = 'A little lost? Let me explain:';
	// ]]></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/jquery.min.js.download"></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/smf_jquery_plugins.js.download"></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/script.js.download"></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/theme.js.download"></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/editor.js.download"></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/jquery.sceditor.js.download"></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/jquery.sceditor.bbcode.js.download"></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/jquery.sceditor.smf.js.download"></script>
	<script src="./Stack Cost, Inline, and Compiler Optimization_files/topic.js.download"></script>
	<script><!-- // --><![CDATA[
		var smf_smileys_url = 'https://forum.arduino.cc/Smileys/arduino';
		var bbc_quote_from = 'Quote from';
		var bbc_quote = 'Quote';
		var bbc_search_on = 'on';
	// ]]></script>
	<meta name="description" content="Stack Cost, Inline, and Compiler Optimization">
	<title>Stack Cost, Inline, and Compiler Optimization</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#557EA0">
	<link rel="canonical" href="https://forum.arduino.cc/index.php?topic=282341.0">
	<link rel="help" href="https://forum.arduino.cc/index.php?action=help">
	<link rel="contents" href="https://forum.arduino.cc/index.php">
	<link rel="search" href="https://forum.arduino.cc/index.php?action=search">
	<link rel="alternate" type="application/rss+xml" title="Arduino Forum - RSS" href="https://forum.arduino.cc/index.php?type=rss2;action=.xml">
	<link rel="alternate" type="application/rss+xml" title="Arduino Forum - Atom" href="https://forum.arduino.cc/index.php?type=atom;action=.xml">
	<link rel="next" href="https://forum.arduino.cc/index.php?topic=282341.15">
	<link rel="index" href="https://forum.arduino.cc/index.php?board=4.0">
<script type="text/javascript" src="./Stack Cost, Inline, and Compiler Optimization_files/notice" async="" referrerpolicy="origin" crossorigin="true"></script><script src="./Stack Cost, Inline, and Compiler Optimization_files/header.js.download"></script><script src="./Stack Cost, Inline, and Compiler Optimization_files/footer.js.download"></script><script src="./Stack Cost, Inline, and Compiler Optimization_files/newsletter-modal.js.download"></script></head>
<body id="chrome" class="action_messageindex board_4" style=""><div class="icons" style="display: none;"><svg xmlns="http://www.w3.org/2000/svg">
  <symbol viewBox="0 0 18 18" id="icon-Global-Menu_Home-BBCube">
    <title>Toggle Navigation</title>
    <g>
      <path d="M4 3.158C4 3.623 3.623 4 3.158 4H.842C.377 4 0 3.623 0 3.158V.842C0 .377.377 0 .842 0h2.316C3.623 0 4 .377 4 .842v2.316zM18 3.158c0 .465-.377.842-.842.842h-2.316C14.377 4 14 3.623 14 3.158V.842c0-.465.377-.842.842-.842h2.316c.465 0 .842.377.842.842v2.316zM11 3.158c0 .465-.377.842-.842.842H7.842C7.377 4 7 3.623 7 3.158V.842C7 .377 7.377 0 7.842 0h2.316c.465 0 .842.377.842.842v2.316zM4 17.158c0 .465-.377.842-.842.842H.842C.377 18 0 17.623 0 17.158v-2.316C0 14.377.377 14 .842 14h2.316c.465 0 .842.377.842.842v2.316zM18 17.158c0 .465-.377.842-.842.842h-2.316c-.465 0-.842-.377-.842-.842v-2.316c0-.465.377-.842.842-.842h2.316c.465 0 .842.377.842.842v2.316zM11 17.158c0 .465-.377.842-.842.842H7.842C7.377 18 7 17.623 7 17.158v-2.316c0-.465.377-.842.842-.842h2.316c.465 0 .842.377.842.842v2.316zM4 10.158c0 .465-.377.842-.842.842H.842C.377 11 0 10.623 0 10.158V7.842C0 7.377.377 7 .842 7h2.316c.465 0 .842.377.842.842v2.316zM18 10.158c0 .465-.377.842-.842.842h-2.316c-.465 0-.842-.377-.842-.842V7.842c0-.465.377-.842.842-.842h2.316c.465 0 .842.377.842.842v2.316zM11 10.158c0 .465-.377.842-.842.842H7.842C7.377 11 7 10.623 7 10.158V7.842C7 7.377 7.377 7 7.842 7h2.316c.465 0 .842.377.842.842v2.316z"></path>
    </g>
  </symbol>
  <symbol viewBox="0 0 130.208 28.333" id="icon-Global-WebApp_Compressed">
    <title>Create Logo</title>
    <g>
      <path d="M51.066 14.02c0-6.424-5.416-11.655-12.082-11.655-.612 0-1.24.045-1.854.13-5.18.738-8.646 4.463-10.588 7.32-1.942-2.856-5.41-6.58-10.583-7.32-.62-.085-1.243-.13-1.86-.13-6.663 0-12.084 5.23-12.084 11.654 0 6.425 5.422 11.654 12.082 11.654.615 0 1.242-.047 1.862-.13 5.175-.744 8.64-4.467 10.583-7.33 1.942 2.863 5.407 6.586 10.588 7.33.615.083 1.243.13 1.863.13 6.656 0 12.073-5.228 12.073-11.655zm-35.69 7.432c-.43.062-.856.097-1.28.097-4.384 0-7.95-3.38-7.95-7.53S9.71 6.49 14.1 6.49c.42 0 .848.034 1.275.093 4.88.698 7.865 5.508 8.877 7.433-1.016 1.932-4 6.74-8.877 7.434zm13.463-7.433c1.007-1.93 3.995-6.736 8.87-7.434.426-.06.857-.093 1.273-.093 4.387 0 7.95 3.38 7.95 7.527 0 4.15-3.563 7.53-7.943 7.53-.42 0-.855-.035-1.282-.097-4.874-.695-7.86-5.505-8.87-7.434z"></path>
      <rect x="10.77" y="12.884" width="7.257" height="2.335"></rect>
      <polygon points="39.79,15.219 42.246,15.219 42.246,12.884 39.79,12.884 39.79,10.422 37.45,10.422 37.45,12.884 34.989,12.884 34.989,15.219 37.45,15.219 37.45,17.68 39.79,17.68"></polygon>
      <path d="M51.934 2.826c-.09-.21-.215-.393-.365-.542-.15-.15-.33-.27-.53-.36-.207-.09-.426-.134-.66-.134-.237 0-.46.043-.663.133-.204.09-.382.21-.53.36-.15.15-.274.334-.364.543-.088.208-.135.432-.135.68 0 .233.047.46.135.67.09.218.214.397.363.55.15.154.327.274.53.362.205.09.428.137.663.137.235 0 .453-.045.66-.137.202-.088.38-.208.53-.36.148-.154.274-.334.364-.55.088-.21.133-.44.133-.672 0-.248-.045-.472-.133-.68zm-.375 1.2c-.066.162-.16.3-.28.42-.123.122-.257.217-.41.29-.15.07-.312.107-.49.107-.18 0-.35-.038-.502-.107-.16-.073-.292-.168-.41-.29-.114-.12-.206-.258-.273-.42-.065-.16-.1-.332-.1-.52s.035-.364.1-.527c.067-.17.16-.308.273-.43.118-.12.25-.214.41-.28.153-.067.322-.102.5-.102.18 0 .343.035.493.1.153.068.288.162.41.283.12.123.214.26.28.43.068.162.104.338.104.525 0 .188-.035.36-.105.522zM50.745 3.67c.096-.044.168-.115.22-.2.053-.083.08-.178.08-.28 0-.162-.06-.302-.172-.42-.116-.12-.31-.176-.582-.176-.104 0-.195 0-.276.008-.082.004-.16.01-.236.018v1.69h.427v-.556h.172l.297.557h.48l-.41-.64zm-.424-.227c-.057 0-.098-.004-.126-.013v-.455c.028-.008.075-.017.138-.017.182 0 .273.085.273.245 0 .162-.093.24-.284.24z"></path>
    </g>
    <g>
      <path d="M79.724 11.917c0-1.647-.737-2.264-2.487-2.264h-2.162v4.426h2.248c1.338-.002 2.4-.5 2.4-2.163z"></path>
      <polygon points="96.968,15.502 100.691,15.502 98.821,9.91"></polygon>
      <path d="M58.66 2.498v23.074h69.573V2.498H58.66zm9.002 17.276c-3.07 0-5.147-1.664-5.147-5.678 0-3.74 2.145-5.8 5.3-5.8 1.133 0 2.3.276 2.934.67l-.464 1.287c-.635-.515-1.63-.755-2.505-.755-2.538 0-3.79 1.647-3.79 4.563 0 3.02 1.252 4.53 3.774 4.53 1.115 0 2.264-.326 2.796-.67l.344 1.168c-.875.463-2.04.686-3.242.686zm12.44-.172l-2.402-4.34h-2.625v4.34h-1.39V8.453h3.604c2.812 0 3.893 1.183 3.893 3.413 0 1.56-.79 2.642-2.076 3.122l2.642 4.615H80.1zm11.94-9.95h-6.175v3.637h5.593v1.183h-5.593v3.91h6.176v1.22h-7.565V8.45h7.565v1.202zm10.02 9.95l-.995-2.95H96.59l-.96 2.95h-1.39l3.894-11.15h1.475l3.91 11.15h-1.457zm11.12-9.95h-3.842v9.95h-1.39v-9.95h-3.86v-1.2h9.092v1.2zm10.054 0h-6.176v3.637h5.593v1.183h-5.593v3.91h6.176v1.22h-7.565V8.45h7.566v1.202z"></path>
    </g>
  </symbol>
  <symbol viewBox="0 0 24.202 24.276" id="icon-Global-user-profile">
    <title>User Profile</title>
    <path d="M20.912 19.718h-1c0-3.827-.883-6.2-5.28-6.2h-5.44c-4.397 0-5.28 2.23-5.28 5.825h-1v-.115c.017-3.337.81-6.71 6.28-6.71h5.44c5.534 0 6.28 3.64 6.28 7.2zM11.95 13.156c-2.464 0-4.468-2.1-4.468-4.68s2.004-4.68 4.467-4.68c2.462 0 4.466 2.1 4.466 4.68s-2.004 4.68-4.467 4.68zm0-8.36c-1.913 0-3.468 1.65-3.468 3.68 0 2.03 1.555 3.68 3.467 3.68 1.91 0 3.466-1.65 3.466-3.68 0-2.03-1.555-3.68-3.467-3.68zM12.034 23.98C5.436 23.98.07 18.61.07 12.013S5.435.05 12.033.05 24 5.415 24 12.013 18.63 23.98 12.033 23.98zm0-22.43C6.264 1.55 1.57 6.242 1.57 12.013S6.262 22.48 12.033 22.48 22.5 17.783 22.5 12.013 17.803 1.55 12.033 1.55z"></path>
  </symbol>
  <symbol viewBox="0 0 20.597 18.807" id="icon-Home-Grid-Open_in_new">
    <title>Open Link in New Tab</title>
    <rect x="14.542" y="-.105" transform="matrix(-.707 -.707 .707 -.707 23.247 19.503)" width="2.241" height="10.084"></rect>
    <path d="M20.597 1.123c0-.62-.5-1.12-1.12-1.12h-7.843V2h6.93v6.966h2.033V1.123zM19.24 18.807H1.356c-.747 0-1.355-.64-1.355-1.424V1.426C0 .64.608.003 1.355.003H8.24l.03 1.982H1.99l-.03 14.807h16.604v-3.988h2.032v4.58c0 .784-.608 1.423-1.355 1.423z"></path>
  </symbol>
</svg></div><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/foundation2.css" type="text/css"><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/common-hacked.css" type="text/css"><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/new_style.css" type="text/css"><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/fonts.css" type="text/css"><link rel="stylesheet" href="./Stack Cost, Inline, and Compiler Optimization_files/arduino-icons.css" type="text/css"><div id="header" class="temporary"><header id="ino-header">

  <nav class="arduino-nav collapsed">

    <!-- logo -->
    <div class="logo">
      <a href="https://forum.arduino.cc/" class="logo-link" role="button" aria-label="Homepage"></a>
      <a href="https://forum.arduino.cc/" class="logo-link-resellers" role="button" aria-label="Resellers Homepage"></a>
    </div>

    <!-- main nav -->
    <div class="main-nav" style="">

      <ul class="ul-burger">
        <li class="burger-menu">
          <a class="burger" role="button" aria-label="Toggle Menu">
            <img src="./Stack Cost, Inline, and Compiler Optimization_files/burger_menu.svg" alt="Open Navigation">
          </a>
        </li>
      </ul>

      <ul class="nav-left">

        <!-- search form mobile -->
        <li class="level-1 show-mobile search-container">
          <a id="search-bar-mobile">
            <form role="search" id="searchform-mobile" method="GET" action="https://www.google.com/search">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="hidden" name="oe" value="UTF-8">
              <input type="text" placeholder="Search" value="" name="q" title="" class="search-typing" aria-label="search">
              <i class="clear-icon">×</i>
              <input type="hidden" name="domains" value="https://forum.arduino.cc" class="fill-it">
              <input type="hidden" name="sitesearch" value="https://forum.arduino.cc" class="fill-it">
            </form>
          </a>
        </li>
        <!-- search form end -->

        <!-- user menu mobile -->
        <li class="user-mobile level-1 signin-mobile">
          <div class="login-button" style="display: block;">
            <a href="https://auth.arduino.cc/login?client_id=forum&amp;redirect_uri=https%3A%2F%2Fforum.arduino.cc%2F&amp;state=370951618&amp;scope=profile%3Acore+profile%3Apublic+profile%3Acontact+offline&amp;response_type=code">Sign In</a>
          </div>
        </li>
        <li class="user-mobile profile-mobile level-1">
          <div class="auth-required" style="display: none;">
            <a href="https://id.arduino.cc/">Profile</a>
          </div>
        </li>
        <li class="user-mobile profile-mobile level-1">
          <div class="auth-required" style="display: none;">
            <a href="https://store.arduino.cc/digital/subscriptions">My Plans</a>
          </div>
        </li>
        <li class="logout user-mobile signout-mobile level-1">
          <div class="auth-required" style="display: none;">
            <a>Sign Out</a>
          </div>
        </li>
        <!-- user menu mobile end -->

        <li class="level-1" id="home">
          <a href="https://www.arduino.cc/">Home</a>
        </li>

        <li class="has-submenu level-1">
          <a href="https://store.arduino.cc/">Store</a>
        </li>

        <li class="has-submenu level-1" id="software">
          <a role="button">Software</a>
          <ul class="nav-submenu">
            <li><a href="https://create.arduino.cc/" target="_blank" rel="noopener">Online Tools</a></li>
            <li><a href="https://www.arduino.cc/en/Main/Software">Downloads</a></li>
          </ul>
        </li>

        <li class="level-1" id="education">
          <a href="https://www.arduino.cc/en/Main/Education">
            <span class="full">Education</span>
            <span class="shorten">Edu</span>
          </a>
        </li>

        <li class="has-submenu level-1" id="resources">
          <a role="button">Resources</a>
          <ul class="nav-submenu">
            <li><a href="https://www.arduino.cc/en/Main/Products">Products</a></li>
            <li><a href="https://www.arduino.cc/en/Guide/HomePage">Getting Started</a></li>
            <li><a href="https://www.arduino.cc/en/Tutorial/HomePage">Tutorials</a></li>
            <li><a href="https://www.arduino.cc/reference/en">Reference</a></li>
            <li><a href="https://www.arduino.cc/en/IoT/HomePage">IoT Cloud</a></li>
          </ul>
        </li>


        <li class="has-submenu level-1" id="community">
          <a role="button">Community</a>
          <ul class="nav-submenu">
            <li><a href="https://forum.arduino.cc/">Forum</a></li>
            <li><a href="https://blog.arduino.cc/">Blog</a></li>
            <li><a href="https://create.arduino.cc/projecthub" target="_blank" rel="noopener">Project Hub</a></li>
            <li><a href="http://playground.arduino.cc/">Playground</a></li>
            <li><a href="https://www.arduino.cc/en/ArduinoAtHeart/Products">AtHeart</a></li>
          </ul>
        </li>


        <li class="has-submenu level-1" id="help">
          <a role="button">Help</a>
          <ul class="nav-submenu">
            <li><a href="https://www.arduino.cc/en/Main/FAQ">FAQ</a></li>
            <li><a href="https://www.arduino.cc/en/ContactUs">Contact Us</a></li>
            <li><a href="https://store.arduino.cc/store-support">Store Support</a></li>
          </ul>
        </li>

        <!-- fake mobile button -->
        <li class="level-1">
          <div class="show-mobile fake-button">
          </div>
        </li>
        <!-- fake mobile button end -->

      </ul>
      <!-- main nav end -->

      <!-- nav right -->
      <ul class="nav-right">

        <!-- search form -->
        <li class="level-1 header-hide-mobile">
          <a id="search-bar">
            <form role="search" id="searchform" method="GET" action="https://www.google.com/search">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="hidden" name="oe" value="UTF-8">
              <input type="text" placeholder="Search" value="" name="q" title="" class="search-typing">
              <i class="clear-icon">×</i>
              <input type="hidden" name="domains" value="https://forum.arduino.cc" class="fill-it">
              <input type="hidden" name="sitesearch" value="https://forum.arduino.cc" class="fill-it">
            </form>
          </a>
        </li>
        <!-- search form end -->

        <!-- language-selector -->
        <!--<li class="language-selector has-submenu level-1">

          <a><div class="selected-language eng"></div></a>

          <div class="nav-submenu">
            <div class="caret"></div>
            <div class="dropdown-box">
            <div class="left-col">
              <h5>Language</h5>
              <ul>
              <li><button class="language-btn"><img src="https://cdn.arduino.cc/header-footer/cy8d1ikufm/images/language_eng.svg"></button>English</li>
              <li><button class="language-btn"><img src="https://cdn.arduino.cc/header-footer/cy8d1ikufm/images/language_ita.svg"></button>Italian</li>
              <li><button class="language-btn"><img src="https://cdn.arduino.cc/header-footer/cy8d1ikufm/images/language_china.svg"></button>Chinese</li>
              </ul>
            </div>
            <div class="right-col">
              <h5>Currency</h5>
              <ul>
              <li><button class="currency-btn">EUR</button>Euro</li>
              <li><button class="currency-btn">USD</button>Dollar</li>
              <li><button class="currency-btn">GBP</button>Pound</li>
              <li><button class="currency-btn">CHF</button>Franc</li>
              <li><button class="currency-btn">HUF</button>Forint</li>
              </ul>
            </div>
            </div>
          </div>

        </li>-->
        <!-- language-selector end -->

        <!-- quotes start -->
        <li class="level-1 quotes-dropdown-trigger has-submenu">
          <a id="quotes-link">
            <div id="quotes"><span class="badge">0</span><img src="./Stack Cost, Inline, and Compiler Optimization_files/icon_quotes.svg" alt="Show Quotes"></div>
          </a>

          <div class="quotes-submenu">
            <div class="caret"></div>
            <div class="dropdown-box">
              <div class="cart-close-button"></div>
              <p class="loading-content">Loading ...</p>

            </div>
          </div>
        </li>
        <!-- quotes end -->

        <!-- cart start -->
        <li class="level-1 cart-dropdown-trigger has-submenu">
          <a id="cart-link">
            <div id="cart"><span class="badge" style="display: none;">0</span><img src="./Stack Cost, Inline, and Compiler Optimization_files/cart.svg" alt="Show Cart">
            </div>
          </a>

          <div class="cart-submenu">
            <div class="caret"></div>
            <div class="dropdown-box">    <div class="cart-close-button"></div>
    <div class="block block-cart">
                <div class="block-content">
                                        <p class="empty">You have no items in your <a href="https://store.arduino.cc/checkout/cart/">shopping cart</a>.</p>
                                </div>
    </div>
</div>
          </div>
        </li>
        <!-- cart end -->

        <!-- geolocation button start -->
        <li class="level-1 store-location-button has-submenu" title="Select your location">
          <a aria-label="Change Store location">
            <div class="store-location">
              <img src="./Stack Cost, Inline, and Compiler Optimization_files/icon_geolocation.svg" alt="Store Location">
            </div>
          </a>

          <div class="nav-submenu">
            <div class="caret"></div>
            <div class="dropdown-box">
              <div class="cart-close-button"></div>
              <p class="empty eu-africa">
                Not shopping from Africa or Europe?
                <a class="change-location">Change location here.</a>
              </p>
              <p class="empty america-asia">
                Not shopping from America, Asia or Oceania?
                <a class="change-location">Change location here.</a>
              </p>
            </div>
          </div>
        </li>
        <!-- geolocation end -->

        <li class="level-1">
          <div class="login-button" style="display: block;">
            <a href="https://auth.arduino.cc/login?client_id=forum&amp;redirect_uri=https%3A%2F%2Fforum.arduino.cc%2F&amp;state=370951618&amp;scope=profile%3Acore+profile%3Apublic+profile%3Acontact+offline&amp;response_type=code">
              <span>Sign In</span>
            </a>
          </div>
        </li>

        <li class="profile-dropdown auth-required has-submenu level-1" style="display: none;">
          <a data-hj-suppress="" class="submenu-toggle profile" aria-label="user profile">
            <img class="user" src="./Stack Cost, Inline, and Compiler Optimization_files/global_user_profile.svg" alt="User Profile">
            <svg class="default">
              <use xlink:href="#icon-Global-user-profile"></use>
            </svg>
            <span class="badge">0</span>
          </a>

          <div class="nav-submenu">
            <div class="caret"></div>
            <div class="dropdown-box">
              <ul>
                <li>
                  <a href="https://id.arduino.cc/">Profile</a>
                </li>
                <li class="forum-messages">
                  <a href="https://forum.arduino.cc/index.php?action=pm">Messages</a>
                </li>
                <li>
                  <a href="https://store.arduino.cc/digital/subscriptions">My Plans</a>
                </li>
                <li class="logout">
                  <a>Sign Out</a>
                </li>
              </ul>
            </div>
          </div>

        </li>

      </ul>
      <!-- nav right -->
    </div>
  </nav>
  <div id="consent-modal-container"><div id="privacy-and-terms-modal" class="arduino-modal info-modal" action="https://api2.arduino.cc/consent/v1/approval/byUser/me" style="display: none;">
  <div id="privacy-and-terms-modal-backdrop" class="modal-backdrop"></div>
  <div class="modal-body approve-privacy-policy">

    <h1>OUR PRIVACY POLICY HAS BEEN UPDATED</h1>

    <form id="terms-privacy-form" novalidate="">
      <p>
        We updated recently our <a href="https://www.arduino.cc/PrivacyPolicy/en/" target="_blank" rel="noopener">Privacy policy</a>, please accept the new <a href="https://www.arduino.cc/en/Main/TermsOfService" target="_blank" rel="noopener">Terms of service</a>.
      </p>
      <ul class="privacy-settings">
        <li>
          <div id="privacy-and-terms-consent-error" class="upper-error-notif">Please accept our privacy policy and terms to continue using our services</div>
          <label class="checkbox">
                <input type="checkbox" id="privacy-and-terms-consent" name="privacy-consent" value="privacy_approval">

                <span class="custom-checkbox"></span>
                <span>I confirm to have read the <a href="https://www.arduino.cc/PrivacyPolicy/en/" target="_blank" rel="noopener">Privacy Policy</a> and to accept the <a href="https://www.arduino.cc/en/Main/TermsOfService" target="_blank" rel="noopener">Terms of Service</a></span>
              </label>
        </li>
      </ul>
      <section class="buttons-wrapper">
        <button name="Ok" type="submit" class="primary button" id="privacy-and-terms-ok-button">
                <span>AGREE AND CONTINUE</span>
              </button>
        <p id="privacy-modal-decline-link">or <a href="https://forum.arduino.cc/index.php?topic=282341.0#">log out</a> and continue the navigation.</p>
      </section>
    </form>
  </div>
</div>
</div>
</header></div>

				<div class="navigate_section" id="headerbread">
          <div class="row" style="max-width: 960px!important;">
          <div class="small-12">
					<ul>
          
						<li>
					<a href="https://forum.arduino.cc/index.php"><span>Arduino Forum</span></a>
						</li>
						<li>
							<span class="dividers"> &gt; </span>
					<a href="https://forum.arduino.cc/index.php#c2"><span>Using Arduino</span></a>
						</li>
						<li>
							<span class="dividers"> &gt; </span>
					<a href="https://forum.arduino.cc/index.php?board=4.0"><span>Programming Questions</span></a>
						</li>
						<li class="last">
							<span class="dividers"> &gt; </span>
					<a href="https://forum.arduino.cc/index.php?topic=282341.0"><span>Stack Cost, Inline, and Compiler Optimization</span></a>
						</li>
					</ul>
        </div>
				</div>
				</div>
  <div class="row collapse">
  <div class="small-12 columns">
	<div id="wrapper">
    <div id="upper_section">
			<div id="inner_section">
				<div id="main_menu">
					<ul class="dropmenu sf-js-enabled sf-arrows" id="menu_nav" style="touch-action: pan-y;">
					</ul>
				</div>
			</div>
		</div>
		<div id="content_section">
			<div id="main_content_section">

			<a id="msg1981271"></a>
			<div class="pagesection top">
				
		<div class="buttonlist floatright">
			
				<a class="button-forum  button_strip_print" href="https://forum.arduino.cc/index.php?action=printpage;topic=282341.0" rel="nofollow">Print</a>
		</div>
				 <a href="https://forum.arduino.cc/index.php?topic=282341.0#bot" class="topbottom floatleft">Go Down</a>
				<div class="pagelinks floatleft">
					<span class="pages">Pages: </span><span class="current_page">[1]</span> <a class="navPages" href="https://forum.arduino.cc/index.php?topic=282341.15">2</a> <a class="navPages" href="https://forum.arduino.cc/index.php?topic=282341.15"><span class="next_page"></span></a> 
				</div>
			</div>
			<div id="forumposts">
				<div class="cat_bar">
					<h3 class="catbg">
						<span id="top_subject" class="topic-icon topic-icon-">Topic: Stack Cost, Inline, and Compiler Optimization&nbsp;<span>(Read 4458 times)</span></span>
						<span class="nextlinks floatright"><a href="https://forum.arduino.cc/index.php?topic=282341.0;prev_next=prev#new">previous topic</a> - <a href="https://forum.arduino.cc/index.php?topic=282341.0;prev_next=next#new">next topic</a></span>
					</h3>
				</div>
				<form action="https://forum.arduino.cc/index.php?action=quickmod2;topic=282341.0" method="post" accept-charset="UTF-8" name="quickModForm" id="quickModForm" style="margin: 0;" onsubmit="return oQuickModify.bInEditMode ? oQuickModify.modifySave(&#39;39a67480e90d202a2440564025713d6c&#39;, &#39;d35284f53db8&#39;) : false">
				<div class="windowbg">
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=173364" title="View the profile of DrWizard" class="pm_icon">DrWizard</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=173364"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/DrWizard.jpg" alt="avatar_DrWizard" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/star.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/star.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/star.gif" alt="*"></li>
								<li class="postgroup">Full Member</li>
								<li class="postcount">Posts: 112</li>
								<li class="custom karma">Karma: 24&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=173364;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981271" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981271#msg1981271" rel="nofollow">Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981271#msg1981271" rel="nofollow" title=" - Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 02:52 am</a>
									<span class="smalltext modified" id="modified_1981271"><span class="lastedit">Last Edit</span>: Nov 30, 2014, 02:55 am by DrWizard</span>
								</h5>
								<div id="msg_1981271_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981271">For the sake of readability and maintainability, I have a lot of subprocesses broken out into individual functions, even though they may only be called from one place.&nbsp; In many cases, that one place may be inside a loop.<br><br>So now I'm trying to optimize one of my sketches for speed and ram, and I started wondering what the cost of this was in processor cycles and bytes of ram pushed to and from the stack.&nbsp; I did some googling but couldn't find any clear answers, especially in regards to Arduino and Atmel.<br><br>Then I recalled the "inline" command and started researching it.&nbsp; Supposedly the compiler optimizations often do this by itself, but I'm also aware that when the Arduino IDE launches the gcc compiler, it optimizes for size and not speed.&nbsp; I've also read a lot of people bitching that its optimizations often aren't very good.<br><br>So I am seeking advice from you advanced gurus - Should I:<br>1) leave it up to the compiler - or<br>2) add the inline keyword to my functions that are only called from one place, in loops - or<br>3) move the code out of the separate function and into the loop?<br><br>And, can someone quote me the approximate cost in time and ram to push and pull from the stack?<br><br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div><div id="ad_container_zone" class="adv-banner"><script src="./Stack Cost, Inline, and Compiler Optimization_files/ajs.php"></script></div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg1981283"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=28339" title="View the profile of CrossRoads" class="pm_icon">CrossRoads</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=28339"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/mefromlaptop.jpg" alt="avatar_CrossRoads" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"></li>
								<li class="membergroup">Global Moderator</li>
								<li class="title">Unlimited Eagle board sizes available.</li>
								<li class="postgroup">Brattain Member</li>
								<li class="postcount">Posts: 43,063</li>
								<li class="profile">
									<ol class="profile_icons">
										<li><a href="http://www.crossroadsfencing.com/BobuinoRev17/" title="http://www.crossroadsfencing.com/BobuinoRev17/" target="_blank" class="new_win"><span class="generic_icons www centericon" title="http://www.crossroadsfencing.com/BobuinoRev17/"></span></a></li>
									</ol>
								</li>
								<li class="custom karma">Karma: 1885&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=28339;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
								<li class="blurb">Author of "Arduino for Teens".  Available for Design &amp; Build services. Now with Unlimited Eagle board sizes!</li>
								<li class="link-profile"><a href="http://www.crossroadsfencing.com/BobuinoRev17/">http://www.crossroadsfencing.com/BobuinoRev17/</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981283" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981283#msg1981283" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #1 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981283#msg1981283" rel="nofollow" title="Reply #1 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 03:12 am</a>
									<span class="smalltext modified" id="modified_1981283"></span>
								</h5>
								<div id="msg_1981283_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981283">I am a programming heretic - I do not use functions! Everything is written out inline.<br>I did add in my very first function recently, to send display messages to a MAX7219. But that was the first time since late 2010 when I started writing Arduino code.<br><br>Your call. Nick Gammon did some interrupt time testing, showed it took like 6-8uS to jump to an ISR and back, I imagine a function call would be similar.<br>Try the Interrupts section here<br>http://www.gammon.com.au/forum/index.php?bbtopic_id=123<br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
							<div class="signature" id="msg_1981283_signature">Designing &amp; building electrical circuits for over 25 years.&nbsp; Screw Shield for Mega/Due/Uno,&nbsp; Bobuino with ATMega1284P, &amp; other '328P &amp; '1284P creations &amp; offerings at&nbsp; my website.</div>
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg">
					<a id="msg1981285"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=249346" title="View the profile of Peter_n" class="pm_icon">Peter_n</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=249346"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/Peter_n.jpg" alt="avatar_Peter_n" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Faraday Member</li>
								<li class="postcount">Posts: 5,210</li>
								<li class="custom karma">Karma: 412&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=249346;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981285" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981285#msg1981285" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #2 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981285#msg1981285" rel="nofollow" title="Reply #2 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 03:15 am</a>
									<span class="smalltext modified" id="modified_1981285"><span class="lastedit">Last Edit</span>: Nov 30, 2014, 04:19 am by Peter_n</span>
								</h5>
								<div id="msg_1981285_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981285">My answer is : maybe options 1, maybe option 2 and maybe option 3 <img src="./Stack Cost, Inline, and Compiler Optimization_files/wink.gif" alt=";)" title="Wink" class="smiley"><br><br>This is Nick Gammons page about the stack for an interrupt: http://gammon.com.au/interrupts<br>But that could be very different from calling a normal function.<br><br>The compiler can do more than you think. For example the time to use a stack and call a function could be small or big, the compiler can optimize that.<br><br>Do you have a test sketch for me, so I can try some optimizations ?<br><br>When you want to optimize things, the compiler can do its part and you should do your part. For example the use of buffers and the functions like memcpy() and so.<br>The Arduino doesn't have a profiler, so you have to guess which part of the code is executed most of the time, and would benefit to optimize it.<br><br>The most compiler options for the avr-gcc compiler are for loop-optimization and inline functions. I tried a number of those, but it didn't do a lot.<br><br>Arduino IDE 1.5.8 BETA uses the newer compiler. It allows the -flto option. I use that for all my Arduino boards and standalone microcontrollers now. It's a very good optimization for size and speed (5 to 25%).<br>To set the -flto option : http://forum.arduino.cc/index.php?topic=262231.0<br><br>(while I was typing this, CrossRoads already mentioned Nick Gammon's page)<br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg1981371"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=36095" title="View the profile of nickgammon" class="pm_icon">nickgammon</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=36095"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/nickgammon.jpg" alt="avatar_nickgammon" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"></li>
								<li class="membergroup">Global Moderator</li>
								<li class="title">Nick Gammon</li>
								<li class="postgroup">Brattain Member</li>
								<li class="postcount">Posts: 28,096</li>
								<li class="profile">
									<ol class="profile_icons">
										<li><a href="http://www.gammon.com.au/" title="http://www.gammon.com.au" target="_blank" class="new_win"><span class="generic_icons www centericon" title="http://www.gammon.com.au"></span></a></li>
									</ol>
								</li>
								<li class="custom karma">Karma: 2337&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=36095;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
								<li class="blurb">Lua rocks!</li>
								<li class="link-profile"><a href="http://www.gammon.com.au/">http://www.gammon.com.au</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981371" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981371#msg1981371" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #3 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981371#msg1981371" rel="nofollow" title="Reply #3 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 05:44 am</a>
									<span class="smalltext modified" id="modified_1981371"></span>
								</h5>
								<div id="msg_1981371_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981371"><div class="quoteheader">Quote</div><blockquote class="bbc_standard_quote">I've also read a lot of people bitching that its optimizations often aren't very good.<br></blockquote><div class="quotefooter"></div>I'm not one of those people. I don't see any references to ISRs in the original question.<br><br><div class="quoteheader">Quote</div><blockquote class="bbc_standard_quote">And, can someone quote me the approximate cost in time and ram to push and pull from the stack?<br></blockquote><div class="quotefooter"></div>First, the compiler will tend to inline small functions, or even large functions called once. So there may be no overhead at all. As for calling a function I think it will be one machine cycle per byte, and it would take two cycles therefore to push a return address, and another two to pull it back. Basically the overhead would be minimal.<br><br>I always code for readability.<br><br>I wouldn't even bother with the inline keyword. It's just a compiler suggestion, it may not make any difference.<br><br>What is more likely to make a difference is choosing good data types (as small as will do the job), avoiding floating point arithmetic, using the F macro for strings, that sort of thing.<br><br><div class="quoteheader">Quote</div><blockquote class="bbc_standard_quote">So now I'm trying to optimize one of my sketches for speed and ram ...<br></blockquote><div class="quotefooter"></div>For a more detailed response please attach this sketch.</div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
							<div class="signature" id="msg_1981371_signature">Please post technical questions on the forum, not by personal message. Thanks!<br><br>More info: http://www.gammon.com.au/electronics</div>
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg">
					<a id="msg1981376"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=36095" title="View the profile of nickgammon" class="pm_icon">nickgammon</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=36095"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/nickgammon.jpg" alt="avatar_nickgammon" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"></li>
								<li class="membergroup">Global Moderator</li>
								<li class="title">Nick Gammon</li>
								<li class="postgroup">Brattain Member</li>
								<li class="postcount">Posts: 28,096</li>
								<li class="profile">
									<ol class="profile_icons">
										<li><a href="http://www.gammon.com.au/" title="http://www.gammon.com.au" target="_blank" class="new_win"><span class="generic_icons www centericon" title="http://www.gammon.com.au"></span></a></li>
									</ol>
								</li>
								<li class="custom karma">Karma: 2337&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=36095;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
								<li class="blurb">Lua rocks!</li>
								<li class="link-profile"><a href="http://www.gammon.com.au/">http://www.gammon.com.au</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981376" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981376#msg1981376" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #4 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981376#msg1981376" rel="nofollow" title="Reply #4 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 05:55 am</a>
									<span class="smalltext modified" id="modified_1981376"></span>
								</h5>
								<div id="msg_1981376_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981376">I did a test, using a Morse Code sketch I had lying around. Manually inlining a function called once saved 50 bytes of program code. That appeared to be (in part):<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code" style="max-height: none; height: 200px;"><br>// get a line from serial (file name) <br>//&nbsp; forces to upper case<br>void getline (char * buf, size_t bufsize)<br>&nbsp;196:<span style="white-space: pre;">	</span>cf 92&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>push<span style="white-space: pre;">	</span>r12<br>&nbsp;198:<span style="white-space: pre;">	</span>df 92&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>push<span style="white-space: pre;">	</span>r13<br>&nbsp;19a:<span style="white-space: pre;">	</span>ff 92&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>push<span style="white-space: pre;">	</span>r15<br>&nbsp;19c:<span style="white-space: pre;">	</span>0f 93&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>push<span style="white-space: pre;">	</span>r16<br>&nbsp;19e:<span style="white-space: pre;">	</span>1f 93&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>push<span style="white-space: pre;">	</span>r17<br>&nbsp;1a0:<span style="white-space: pre;">	</span>cf 93&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>push<span style="white-space: pre;">	</span>r28<br>&nbsp;1a2:<span style="white-space: pre;">	</span>df 93&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>push<span style="white-space: pre;">	</span>r29<br>&nbsp;1a4:<span style="white-space: pre;">	</span>8c 01&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>movw<span style="white-space: pre;">	</span>r16, r24<br>&nbsp;1a6:<span style="white-space: pre;">	</span>eb 01&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>movw<span style="white-space: pre;">	</span>r28, r22<br>&nbsp;1a8:<span style="white-space: pre;">	</span>04 c0&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>rjmp<span style="white-space: pre;">	</span>.+8&nbsp; &nbsp; &nbsp; <span style="white-space: pre;">	</span>; 0x1b2 &lt;_Z7getlinePcj+0x1c&gt;<br><br>...<br><br>&nbsp; }&nbsp; &nbsp; &nbsp;// end of getline<br>&nbsp;20c:<span style="white-space: pre;">	</span>df 91&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>pop<span style="white-space: pre;">	</span>r29<br>&nbsp;20e:<span style="white-space: pre;">	</span>cf 91&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>pop<span style="white-space: pre;">	</span>r28<br>&nbsp;210:<span style="white-space: pre;">	</span>1f 91&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>pop<span style="white-space: pre;">	</span>r17<br>&nbsp;212:<span style="white-space: pre;">	</span>0f 91&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>pop<span style="white-space: pre;">	</span>r16<br>&nbsp;214:<span style="white-space: pre;">	</span>ff 90&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>pop<span style="white-space: pre;">	</span>r15<br>&nbsp;216:<span style="white-space: pre;">	</span>df 90&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>pop<span style="white-space: pre;">	</span>r13<br>&nbsp;218:<span style="white-space: pre;">	</span>cf 90&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>pop<span style="white-space: pre;">	</span>r12<br>&nbsp;21a:<span style="white-space: pre;">	</span>08 95&nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space: pre;">	</span>ret<br></code><br><br>So 2 bytes per push/pop in program code, plus it seems it takes 2 cycles, not one, that I wrote earlier.&nbsp; Adding "inline" in front of this function did indeed save the 50 bytes in the compiled code. So perhaps there is some point, particularly for functions you know are only called once. That way you get the readability, without the overhead of the extra size and time taken.</div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
							<div class="signature" id="msg_1981376_signature">Please post technical questions on the forum, not by personal message. Thanks!<br><br>More info: http://www.gammon.com.au/electronics</div>
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg1981468"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=291184" title="View the profile of jboyton" class="pm_icon">jboyton</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=291184"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/default.png" alt="avatar_jboyton" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Edison Member</li>
								<li class="postcount">Posts: 1,801</li>
								<li class="custom karma">Karma: 168&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=291184;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981468" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981468#msg1981468" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #5 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981468#msg1981468" rel="nofollow" title="Reply #5 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 09:04 am</a>
									<span class="smalltext modified" id="modified_1981468"></span>
								</h5>
								<div id="msg_1981468_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981468">A call takes 4 cycles and a return takes 4 cycles.</div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg">
					<a id="msg1981478"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=291184" title="View the profile of jboyton" class="pm_icon">jboyton</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=291184"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/default.png" alt="avatar_jboyton" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Edison Member</li>
								<li class="postcount">Posts: 1,801</li>
								<li class="custom karma">Karma: 168&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=291184;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981478" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981478#msg1981478" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #6 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981478#msg1981478" rel="nofollow" title="Reply #6 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 09:20 am</a>
									<span class="smalltext modified" id="modified_1981478"></span>
								</h5>
								<div id="msg_1981478_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981478">I tried a very simple example:<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code" style="max-height: none; height: 200px;">void setup()<br>{<br>&nbsp;&nbsp;Serial.begin(115200);<br>&nbsp;&nbsp;foo();<br>}<br><br>void loop() {}<br><br>void foo() {<br>&nbsp;&nbsp;Serial.println("Hello world.");<br>}</code><br><br>Although this function is called only once the compiler did not put it inline. It generated call and return instructions. When I made foo() inline, either by declaring it inline or by placing the code inside setup(), the size of the sketch actually <em>increased</em> by two bytes. The inline code lacked the call/ret instructions but for some reason added two pushes and two pops to setup(), hence the two byte difference.<br><br>I didn't time the executions but based on the assembly code it would be a wash.<br><br>This isn't a very useful example but it does hint at possible unpredictability.</div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg1981500"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=249346" title="View the profile of Peter_n" class="pm_icon">Peter_n</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=249346"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/Peter_n.jpg" alt="avatar_Peter_n" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Faraday Member</li>
								<li class="postcount">Posts: 5,210</li>
								<li class="custom karma">Karma: 412&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=249346;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981500" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981500#msg1981500" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #7 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981500#msg1981500" rel="nofollow" title="Reply #7 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 10:07 am</a>
									<span class="smalltext modified" id="modified_1981500"></span>
								</h5>
								<div id="msg_1981500_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981500">Arduino uses "-Os" to optimize for size, perhaps the compiler decided that not doing it inline resulted in shorter code. That simple "-Os" has a whole world of optimization decisions behind it.</div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg">
					<a id="msg1981514"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=174714" title="View the profile of Robin2" class="pm_icon">Robin2</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=174714"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/Robin2.jpg" alt="avatar_Robin2" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Brattain Member</li>
								<li class="postcount">Posts: 58,953</li>
								<li class="custom karma">Karma: 2947&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=174714;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981514" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981514#msg1981514" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #8 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981514#msg1981514" rel="nofollow" title="Reply #8 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 10:34 am</a>
									<span class="smalltext modified" id="modified_1981514"></span>
								</h5>
								<div id="msg_1981514_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981514"><div class="quoteheader"><a href="https://forum.arduino.cc/index.php?msg=1981271">Quote from: DrWizard on Nov 30, 2014, 02:52 am</a></div><blockquote class="bbc_standard_quote">So I am seeking advice from you advanced gurus - Should I:<br>1) leave it up to the compiler - or<br>2) add the inline keyword to my functions that are only called from one place, in loops - or<br>3) move the code out of the separate function and into the loop?</blockquote><div class="quotefooter"></div>I'm not a Guru and I am only advanced in years.<br><br>For me readabilitiy is the number one goal. I am much more concerned to save my time rather than the Arduino's.<br><br>If it works properly (which includes fast enough) then do nothing.<br>If it does not work properly (including running too slow) then figure out where the problem is.<br><br>My guess is that far more run-time speed can be gained by modifying the program than by any attempt to improve on the compiler's optimizations.<br><br>...R<br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
							<div class="signature" id="msg_1981514_signature">Two or three hours spent thinking and reading documentation solves most programming problems.</div>
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg1981557"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=36095" title="View the profile of nickgammon" class="pm_icon">nickgammon</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=36095"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/nickgammon.jpg" alt="avatar_nickgammon" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"></li>
								<li class="membergroup">Global Moderator</li>
								<li class="title">Nick Gammon</li>
								<li class="postgroup">Brattain Member</li>
								<li class="postcount">Posts: 28,096</li>
								<li class="profile">
									<ol class="profile_icons">
										<li><a href="http://www.gammon.com.au/" title="http://www.gammon.com.au" target="_blank" class="new_win"><span class="generic_icons www centericon" title="http://www.gammon.com.au"></span></a></li>
									</ol>
								</li>
								<li class="custom karma">Karma: 2337&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=36095;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
								<li class="blurb">Lua rocks!</li>
								<li class="link-profile"><a href="http://www.gammon.com.au/">http://www.gammon.com.au</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981557" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981557#msg1981557" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #9 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981557#msg1981557" rel="nofollow" title="Reply #9 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 11:42 am</a>
									<span class="smalltext modified" id="modified_1981557"></span>
								</h5>
								<div id="msg_1981557_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981557"><div class="quoteheader"><a href="https://forum.arduino.cc/index.php?msg=1981468">Quote from: jboyton on Nov 30, 2014, 09:04 am</a></div><blockquote class="bbc_standard_quote">A call takes 4 cycles and a return takes 4 cycles.<br></blockquote><div class="quotefooter"></div>Yes but you have to take into account the pushes and pops the compiler generates to protect the registers used inside the function.</div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
							<div class="signature" id="msg_1981557_signature">Please post technical questions on the forum, not by personal message. Thanks!<br><br>More info: http://www.gammon.com.au/electronics</div>
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg">
					<a id="msg1981637"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=22951" title="View the profile of robtillaart" class="pm_icon">robtillaart</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=22951"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/default.png" alt="avatar_robtillaart" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"></li>
								<li class="membergroup">Global Moderator</li>
								<li class="postgroup">Brattain Member</li>
								<li class="postcount">Posts: 19,697</li>
								<li class="custom karma">Karma: 1143&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=22951;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
								<li class="blurb">In theory there is no difference between theory and practice, however in practice there are many...</li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981637" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981637#msg1981637" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #10 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981637#msg1981637" rel="nofollow" title="Reply #10 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 01:00 pm</a>
									<span class="smalltext modified" id="modified_1981637"></span>
								</h5>
								<div id="msg_1981637_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981637">Back to the original question:<br><div class="quoteheader">Quote</div><blockquote class="bbc_standard_quote">So now I'm trying to optimize one of my sketches for speed and ram,</blockquote><div class="quotefooter"></div>One of the favorite RAM optimizations is to move const char arrays or lookup tables to PROGMEM. (google +PROGMEM +Arduino +tutorial) The price is a small performance penalty, but can save a lot of precious RAM.<br><br>Second a good way to optimize RAM and speed is to check the datatypes of the variables used.<br>A short check list:<br>- 8 bit vars are faster than 16 bits vars are faster than 32 bits vars<br>- floats are faster than long (but float have less significant bits)<br>- moving math from float domain to 16 bit int domain speeds things up<br>- avoid division, use multiplication if possible.<br>- reuse calculated values (do math only once)<br>- mixed unsigned and signed should be avoided if possible.<br>- lookup tables can be faster than functions (but costs more RAM)<br>- exact function might be slower than approximations that often are good enough.<br>- the use of the String class can slow things down and is not RAM friendly.<br><br>Finally the algorithm used can make a big difference. E.g. Recursive functions are slower than iterative and use more RAM in general.<br><br>If you post the actual code we might help to find some hot spots.<br><br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
							<div class="signature" id="msg_1981637_signature">Rob Tillaart<br><br>Nederlandse sectie - http://arduino.cc/forum/index.php/board,77.0.html -<br>(Please do not PM for private consultancy)</div>
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg1981658"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=2336" title="View the profile of westfw" class="pm_icon">westfw</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=2336"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/westfw.jpg" alt="avatar_westfw" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Shannon Member</li>
								<li class="postcount">Posts: 12,189</li>
								<li class="custom karma">Karma: 1209&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=2336;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
								<li class="blurb">Strongly opinionated, but not official!</li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1981658" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1981658#msg1981658" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #11 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1981658#msg1981658" rel="nofollow" title="Reply #11 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Nov 30, 2014, 01:30 pm</a>
									<span class="smalltext modified" id="modified_1981658"></span>
								</h5>
								<div id="msg_1981658_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1981658"><div class="quoteheader">Quote</div><blockquote class="bbc_standard_quote">you have to take into account the pushes and pops the compiler generates to protect the registers used inside the function.</blockquote><div class="quotefooter"></div>Maybe.&nbsp; "small" functions won't need to save many (or any!) registers.&nbsp; "large" function would need to do the equivalent of saving those registers even if the code was inline.&nbsp; Argument passing MOST of the time is done in registers, so you're not always putting arguments on the stack.&nbsp; local variables in functions give back their memory (if they use any) when the function returns, while having "many" local variables in a single function (or global variables) uses that memory ALL the time.<br><br>I'd say: use your functions, but you should actually LOOK at the machine code/assembler produced by the compiler, and SEE if it seems to have a lot of overhead associated with the function calls.&nbsp; See "avr-objdump."&nbsp;&nbsp; Usually it won't.<br><br>(I actually think that "we" don't suggestion dividing problems into functions NEARLY as much as we should, here...)<br><br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg">
					<a id="msg1983249"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=173364" title="View the profile of DrWizard" class="pm_icon">DrWizard</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=173364"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/DrWizard.jpg" alt="avatar_DrWizard" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/star.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/star.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/star.gif" alt="*"></li>
								<li class="postgroup">Full Member</li>
								<li class="postcount">Posts: 112</li>
								<li class="custom karma">Karma: 24&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=173364;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1983249" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1983249#msg1983249" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #12 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1983249#msg1983249" rel="nofollow" title="Reply #12 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Dec 01, 2014, 06:09 pm</a>
									<span class="smalltext modified" id="modified_1983249"></span>
								</h5>
								<div id="msg_1983249_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1983249">The size of the sketch (in Flash) is not my issue.&nbsp; Ram usage and speed are the issue.&nbsp; Lemme tell you what the project is:&nbsp; I am doing WS2801 "NeoPixels" on my Christmas tree, and also 2 trees for friends.&nbsp; Depending on the size of our trees, we are using 250, 400, and 500 pixels.&nbsp; These are being controlled by Arduino Mega 2560's because I needed the extra RAM just for the buffers for the pixels, if nothing else.&nbsp; I have programmed in some very advanced (and very cool looking!) effects, but refresh speed is an issue on some effects.<br><br>I was a professional programmer for 30 years before retiring.&nbsp; I have a ton of experience programming in other languages, including C# and Java just to name a few.&nbsp; But C++ I'm still struggling a bit with; it's very unforgiving.&nbsp; I wholly agree that readability and maintainability are very important.&nbsp; But, efficiency is just one of my pet peeves.&nbsp; That's left over from my IMSAI and Altair days&nbsp; I have already gone to great lengths to optimize this sketch.&nbsp; Variable sizes are the minimum necessary.&nbsp; All strings and constants are in PROGMEM.&nbsp; I cache results of calculations where I can.&nbsp; I do have some floating point math still in the sketch and I know that is causing a major slowdown, but I'm working on converting that to fixed point.&nbsp; About the only thing I haven't tried to optimize yet is the inlining of all my different processes, which as I mentioned earlier, are in separate functions for readability.&nbsp; But many of them are called from within loops so the stack cost -- (assuming the compiler doesn't optimize it well for me) -- would add up and be considerable. There are lots and lots of loops in this sketch, often nested many levels deep in order to do the complex effects.</div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg1983594"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=249346" title="View the profile of Peter_n" class="pm_icon">Peter_n</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=249346"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/Peter_n.jpg" alt="avatar_Peter_n" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Faraday Member</li>
								<li class="postcount">Posts: 5,210</li>
								<li class="custom karma">Karma: 412&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=249346;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1983594" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1983594#msg1983594" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #13 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1983594#msg1983594" rel="nofollow" title="Reply #13 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Dec 01, 2014, 10:04 pm</a>
									<span class="smalltext modified" id="modified_1983594"></span>
								</h5>
								<div id="msg_1983594_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1983594">The Arduino libraries can sometimes be replaced with direct writing to registers, which could be 20 times faster. Can you show us the sketch or the most import part with loops ?<br><br>I think most things have already been said:<br><ul class="bbc_list"><li>There is no such thing as stack cost, at least not stack cost that is predictable. The ATmega microcontrollers have many registers, and the compiler uses those, as DrWizard wrote.</li><li>The new avr-gcc compiler allows the -flto option which can increase the speed and decrease the size by 5 to 25% as I wrote.</li><li>I disagree with robtillaart, floats usually take more time than 32-bit long (and I have tested it). But the difference is not that big. Dividing is however a lot slower than multiplexing.</li><li>The default -Os (optimize for size) can be overwritten by a speed optimization. Since you have a Arduino Mega, code size is no problem. And it will increase the speed a lot.</li></ul><br>The gnu avr gcc compiler has decades of development for optimizations, they even outsmart your 30 years as professional programmer <img src="./Stack Cost, Inline, and Compiler Optimization_files/grin.gif" alt=";D" title="Grin" class="smiley"> It is impossible to tell if using more functions would slow things down.<br>You can use our knowledge about optimizing the Arduino specific things. It will not be the loops, neither the use of many functions, but calls like<span class="bbc_tt"> digitalWrite(2, HIGH)</span>, which could be 20 times slower than <span class="bbc_tt">bitSet( PORTE, 4)</span>.<br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg">
					<a id="msg1983696"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="https://forum.arduino.cc/index.php?action=profile;u=36095" title="View the profile of nickgammon" class="pm_icon">nickgammon</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="https://forum.arduino.cc/index.php?action=profile;u=36095"><img class="avatar" src="./Stack Cost, Inline, and Compiler Optimization_files/nickgammon.jpg" alt="avatar_nickgammon" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"><img src="./Stack Cost, Inline, and Compiler Optimization_files/stargmod.gif" alt="*"></li>
								<li class="membergroup">Global Moderator</li>
								<li class="title">Nick Gammon</li>
								<li class="postgroup">Brattain Member</li>
								<li class="postcount">Posts: 28,096</li>
								<li class="profile">
									<ol class="profile_icons">
										<li><a href="http://www.gammon.com.au/" title="http://www.gammon.com.au" target="_blank" class="new_win"><span class="generic_icons www centericon" title="http://www.gammon.com.au"></span></a></li>
									</ol>
								</li>
								<li class="custom karma">Karma: 2337&nbsp;&nbsp;<a href="https://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=36095;d35284f53db8=39a67480e90d202a2440564025713d6c">[add]</a></li>
								<li class="blurb">Lua rocks!</li>
								<li class="link-profile"><a href="http://www.gammon.com.au/">http://www.gammon.com.au</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Stack Cost, Inline, and Compiler Optimization_files/xx.png" alt="">
								</div>
								<div id="subject_1983696" class="subject_title"><a href="https://forum.arduino.cc/index.php?topic=282341.msg1983696#msg1983696" rel="nofollow">Re: Stack Cost, Inline, and Compiler Optimization</a></div>
								<div class="page_number floatright">
									 #14 
								</div>
								<h5>
									<a href="https://forum.arduino.cc/index.php?topic=282341.msg1983696#msg1983696" rel="nofollow" title="Reply #14 - Re: Stack Cost, Inline, and Compiler Optimization" class="smalltext">Dec 01, 2014, 11:31 pm</a>
									<span class="smalltext modified" id="modified_1983696"></span>
								</h5>
								<div id="msg_1983696_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_1983696"><div class="quoteheader"><a href="https://forum.arduino.cc/index.php?msg=1983249">Quote from: DrWizard on Dec 01, 2014, 06:09 pm</a></div><blockquote class="bbc_standard_quote">The size of the sketch (in Flash) is not my issue.&nbsp; Ram usage and speed are the issue.&nbsp; <br></blockquote><div class="quotefooter"></div>Post your code please. This is all hypothetical. If you are not short of PROGMEM then floating point calculations could conceivably be done by table lookup.<br><br>See <a href="http://wp.josh.com/2014/05/13/ws2812-neopixels-are-not-so-finicky-once-you-get-to-know-them/" class="bbc_link" target="_blank">http://wp.josh.com/2014/05/13/ws2812-neopixels-are-not-so-finicky-once-you-get-to-know-them/</a><br><br>He managed to drive over 1000 pixels using only 5% of a Arduino Duemilanove's RAM (2 kB).</div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
							<div class="signature" id="msg_1983696_signature">Please post technical questions on the forum, not by personal message. Thanks!<br><br>More info: http://www.gammon.com.au/electronics</div>
						</div>
					</div>
				</div>
				<hr class="post_separator">
				</form>
			</div>
			<div class="pagesection">
				
		<div class="buttonlist floatright">
			
				<a class="button-forum  button_strip_print" href="https://forum.arduino.cc/index.php?action=printpage;topic=282341.0" rel="nofollow">Print</a>
		</div>
				 <a href="https://forum.arduino.cc/index.php?topic=282341.0#main_content_section" class="topbottom floatleft" id="bot">Go Up</a>
				<div class="pagelinks floatleft">
					<span class="pages">Pages: </span><span class="current_page">[1]</span> <a class="navPages" href="https://forum.arduino.cc/index.php?topic=282341.15">2</a> <a class="navPages" href="https://forum.arduino.cc/index.php?topic=282341.15"><span class="next_page"></span></a> 
				</div>
			</div>
			<div id="moderationbuttons">
				
			</div>
			<div id="display_jump_to"><label class="smalltext" for="display_jump_to_select">Jump to:</label> <select name="display_jump_to_select" id="display_jump_to_select" onfocus="grabJumpToContent(this);"><option value="?board=4.0">=&gt; Programming Questions</option></select>&nbsp;<input type="button" class="button_submit" value="Go" onclick="window.location.href = &#39;https://forum.arduino.cc/index.php?board=4.0&#39;;"></div>
			<br class="clear">
				<script><!-- // --><![CDATA[
					var oQuickReply = new QuickReply({
						bDefaultCollapsed: false,
						iTopicId: 282341,
						iStart: 0,
						sScriptUrl: smf_scripturl,
						sImagesUrl: smf_images_url,
						sContainerId: "quickReplyOptions",
						sImageId: "quickReplyExpand",
						sClassCollapsed: "toggle_up",
						sClassExpanded: "toggle_down",
						bIsFull: true
					});
					if ('XMLHttpRequest' in window)
					{
						var oQuickModify = new QuickModify({
							sScriptUrl: smf_scripturl,
							sClassName: 'quick_edit',
							bShowModify: true,
							iTopicId: 282341,
							sTemplateBodyEdit: '\n\t\t\t\t\t\t\t\t<div id="quick_edit_body_container">\n\t\t\t\t\t\t\t\t\t<div id="error_box" class="error"><' + '/div>\n\t\t\t\t\t\t\t\t\t<textarea class="editor" name="message" rows="12" style="width: 100%; margin-bottom: 10px;" tabindex="1">%body%<' + '/textarea><br>\n\t\t\t\t\t\t\t\t\t<input type="hidden" name="d35284f53db8" value="39a67480e90d202a2440564025713d6c">\n\t\t\t\t\t\t\t\t\t<input type="hidden" name="topic" value="282341">\n\t\t\t\t\t\t\t\t\t<input type="hidden" name="msg" value="%msg_id%">\n\t\t\t\t\t\t\t\t\t<div class="righttext">\n\t\t\t\t\t\t\t\t\t\t<input type="submit" name="post" value="Save" tabindex="2" onclick="return oQuickModify.modifySave(\'39a67480e90d202a2440564025713d6c\', \'d35284f53db8\');" accesskey="s" class="button_submit">&nbsp;&nbsp;<input type="submit" name="cancel" value="Cancel" tabindex="3" onclick="return oQuickModify.modifyCancel();" class="button_submit">\n\t\t\t\t\t\t\t\t\t<' + '/div>\n\t\t\t\t\t\t\t\t<' + '/div>',
							sTemplateSubjectEdit: '<input type="text" name="subject" value="%subject%" size="80" maxlength="80" tabindex="4" class="input_text">',
							sTemplateBodyNormal: '%body%',
							sTemplateSubjectNormal: '<a hr'+'ef="' + smf_scripturl + '?topic=282341.msg%msg_id%#msg%msg_id%" rel="nofollow">%subject%<' + '/a>',
							sTemplateTopSubject: 'Topic: %subject% &nbsp;(Read 4458 times)',
							sTemplateReasonEdit: '<input type="text" name="modify_reason" value="%modify_reason%" size="80" maxlength="80" tabindex="5" class="input_text">)',
							sTemplateReasonNormal: '%modify_text',
							sErrorBorderStyle: '1px solid red'
						});

						aJumpTo[aJumpTo.length] = new JumpTo({
							sContainerId: "display_jump_to",
							sJumpToTemplate: "<label class=\"smalltext\" for=\"%select_id%\">Jump to:<" + "/label> %dropdown_list%",
							iCurBoardId: 4,
							iCurBoardChildLevel: 0,
							sCurBoardName: "Programming Questions",
							sBoardChildLevelIndicator: "==",
							sBoardPrefix: "=> ",
							sCatSeparator: "-----------------------------",
							sCatPrefix: "",
							sGoButtonLabel: "Go"
						});

						aIconLists[aIconLists.length] = new IconList({
							sBackReference: "aIconLists[" + aIconLists.length + "]",
							sIconIdPrefix: "msg_icon_",
							sScriptUrl: smf_scripturl,
							bShowModify: true,
							iBoardId: 4,
							iTopicId: 282341,
							sSessionId: smf_session_id,
							sSessionVar: smf_session_var,
							sLabelIconList: "Message icon",
							sBoxBackground: "transparent",
							sBoxBackgroundHover: "#ffffff",
							iBoxBorderWidthHover: 1,
							sBoxBorderColorHover: "#adadad" ,
							sContainerBackground: "#ffffff",
							sContainerBorder: "1px solid #adadad",
							sItemBorder: "1px solid #ffffff",
							sItemBorderHover: "1px dotted gray",
							sItemBackground: "transparent",
							sItemBackgroundHover: "#e0e0f0"
						});
					}
				// ]]></script>
			</div>
		</div>
	</div>
  </div>
</div>
           <br><style>.pagefooter a { color: white !important; }</style>		<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async="" src="./Stack Cost, Inline, and Compiler Optimization_files/js"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-22581631-3');
	</script>
    <div>
      <div id="newsletter-modal"><div id="newsletter-popup-privacy" class="arduino-modal info-modal" action="https://api2.arduino.cc/consent/v1/subscription" style="display: none;">
  <!-- Step 1.5, approve the privacy policy -->
  <div id="privacy-modal-backdrop" class="modal-backdrop"></div>
  <div class="modal-body approve-privacy-policy">

    <h1>Privacy consent</h1>

    <div>
      <p>
        Arduino cares about the privacy and personal data of its users. The <a href="https://www.arduino.cc/en/Main/PrivacyPolicy" target="_blank" rel="noopener">privacy policy</a> is meant to inform you on how we process your personal data when you use our services.
      </p>

      <ul class="privacy-settings">
        <li>
          <div id="privacy-consent-error" class="upper-error-notif">Please confirm that you have read the privacy policy</div>
          <label class="checkbox">
            <input type="checkbox" id="privacy-consent" name="privacy-consent" value="privacy_approval">

            <span class="custom-checkbox"></span>
            <span>I confirm to have read the privacy policy<span class="required-asterisk">*</span></span>
          </label>
        </li>
        <li>
          <div id="newsletter-error" class="upper-error-notif">Please confirm your consent to receive the newsletter</div>
          <label class="checkbox">
            <input type="checkbox" id="newsletter-consent" name="newsletter-consent" value="newsletter_approval" checked="">

            <span class="custom-checkbox"></span>
            <span>I confirm my consent to receive your newsletter<span class="required-asterisk">*</span></span>
          </label>
        </li>
        <li>
          <label class="checkbox">
            <input type="checkbox" id="marketing-consent" value="marketing_approval">
            <span class="custom-checkbox"></span>
            <span>I confirm my consent to the processing of my personal data for marketing purposes, consisting in commercial offers sent via email</span>
          </label>
        </li>
        <li>
          <label class="checkbox">
            <input type="checkbox" id="tracking-consent" value="tracking_approval">
            <span class="custom-checkbox"></span>
            <span>I confirm my consent to automated processing of my personal data, by means of profiling, in order to receive commercial offers customized on the basis of my browsing and purchasing behavior</span>
          </label>
        </li>
      </ul>
      <div class="my-error-notification">
        <div id="newsletterSubscribeStatus"></div>
      </div>
      <section class="buttons-wrapper">
        <button name="Cancel" class="button secondary" id="newsletter-privacy-policy-cancel-button">Cancel</button>
        <button name="Ok" class="primary button" id="newsletter-privacy-policy-ok-button">Ok</button>
      </section>
    </div>
  </div>
</div>

<!-- step 2, confirm popup -->
<div id="newsletter-popup-confirm" class="arduino-modal info-modal" style="display: none;">
     <div class="modal-backdrop"></div>
  <div id="confirm-newsletter-modal-backdrop" class="modal-body confirm-email">
    <h1>Confirm your email address</h1>
    <div id="newsletterModalBody">
      <p>
        We need to confirm your email address.<br> To complete the subscription, please click the link in the email we just sent you.
      </p>
      <p>
        Thank you for subscribing!
      </p>
      <section class="buttons-wrapper">
        <button name="Ok" class="button" id="confirm-email-ok-button">Ok</button>
      </section>
    </div>
  </div>
</div>
</div>
      <div id="footer"><div id="footer-block" style="">
  <div class="newsletter-form">
    <h4 id="newsletter-input-label">Newsletter</h4>
    <div class="subscribe-wrapper">
      <div id="newsletter-email-error" class="upper-error-notif">Please insert a valid email</div>
      <div class="input-wrapper">
        <input id="newsletter-email" aria-labelledby="newsletter-input-label" type="email" name="email" class="email" placeholder="Enter your email to sign up">
        <button id="subscribe-btn" aria-label="Subscribe" class="button">Subscribe</button>
      </div>
    </div>
  </div>
  <section class="footer-links-wrapper">
    <ul id="footer-list">
      <li>
        <a href="https://www.arduino.cc/en/Main/TermsOfService">
          <span class="text">Terms Of Service</span>
        </a>
      </li>
      <li>
        <a href="https://www.arduino.cc/en/Main/PrivacyPolicy">
          <span class="text">Privacy Policy</span>
        </a>
      </li>
      <li>
        <div id="teconsent">
        </div>
      </li>
      <li>
        <a href="https://www.arduino.cc/en/Main/ContactUs">
          <span class="text">Contact Us</span>
        </a>
      </li>
      <li>
        <a href="https://www.arduino.cc/en/Main/AboutUs">
          <span class="text">About Us</span>
        </a>
      </li>
      <li>
        <a href="https://store.arduino.cc/distributors">
          <span class="text">Distributors</span>
        </a>
      </li>
      <li>
        <a href="https://careers.arduino.cc/">
          <span class="text">Careers</span>
        </a>
      </li>
      <li>
        <a href="https://www.arduino.cc/en/Main/Security">
          <span class="text">Security</span>
        </a>
      </li>
    </ul><!-- footer-list -->
    <div class="footer-note">
      <p>
        <a href="https://www.arduino.cc/en/Main/CopyrightNotice">
          <span class="text">
            © <span id="current-year">2019</span> Arduino
          </span>
        </a>
      </p>
    </div>
  </section>
  <ul class="social-btn-list">
    <li>
      <a href="https://www.facebook.com/official.arduino" target="_blank" id="facebook" class="facebook" rel="noopener">
        <img src="./Stack Cost, Inline, and Compiler Optimization_files/icon-facebook.svg" alt="facebook">
        <p class="follow-us">follow us on Facebook</p>
      </a>
    </li>
    <li>
      <a href="https://twitter.com/arduino" target="_blank" id="twitter" class="twitter" rel="noopener">
        <img src="./Stack Cost, Inline, and Compiler Optimization_files/icon-twitter.svg" alt="twitter">
        <p class="follow-us">follow us on Twitter</p>
      </a>
    </li>
    <li>
      <a href="https://www.instagram.com/arduino.cc/" target="_blank" id="instagram" class="instagram" rel="noopener">
        <img src="./Stack Cost, Inline, and Compiler Optimization_files/icon-instagram.svg" alt="instagram">
        <p class="follow-us">follow us on Instagram</p>
      </a>
    </li>
    <li>
      <a href="https://github.com/arduino/" target="_blank" id="github" class="github" rel="noopener">
        <img src="./Stack Cost, Inline, and Compiler Optimization_files/icon-github.svg" alt="github">
        <p class="follow-us">Arduino on GitHub</p>
      </a>
    </li>
    <li>
      <a href="https://www.flickr.com/photos/arduino_cc" target="_blank" id="flickr" class="flickr" rel="noopener">
        <img src="./Stack Cost, Inline, and Compiler Optimization_files/icon-flickr.svg" alt="flickr">
        <p class="follow-us">follow us on Flickr</p>
      </a>
    </li>
    <li>
      <a href="https://www.youtube.com/user/arduinoteam" target="_blank" id="youtube" class="youtube" rel="noopener">
        <img src="./Stack Cost, Inline, and Compiler Optimization_files/icon-youtube.svg" alt="youtube">
        <p class="follow-us">follow us on YouTube</p>
      </a>
    </li>
  </ul>

  <button id="go-top" class="go-top-footer-btn" aria-label="Scroll Top">
    <span class="arrow-1"></span>
    <span class="arrow-2"></span>
    <span class="arrow-3"></span>
  </button>
</div><!-- footer-block -->
</div>
    </div>
    <script src="./Stack Cost, Inline, and Compiler Optimization_files/loader.js.download" type="text/javascript"></script>
    <script>
      var auth = {
        token: function() {
          return false ? Promise.resolve({
            token: null          }) : Promise.reject('loggedout')
        },
        redirectURI: function() {
          return 'https://auth.arduino.cc/login?client_id=forum&redirect_uri=https%3A%2F%2Fforum.arduino.cc%2F&state=370951618&scope=profile%3Acore+profile%3Apublic+profile%3Acontact+offline&response_type=code';
        }
      };
      ArduinoHeaderAndFooter({
        auth: "custom",
        authOptions: auth
      });
    </script>
  <div id="ajax_in_progress" style="display: none;">Loading...</div>
<script><!-- // --><![CDATA[
	function triggerCron() {
		var tempImage = new Image();
		tempImage.src = 'https://forum.arduino.cc' + "/cron.php?ts=1564627845";
	}
	window.setTimeout(triggerCron, 1);
// ]]></script>
    <script src="./Stack Cost, Inline, and Compiler Optimization_files/modernizr.js.download"></script>
    <!--[if gte IE 9]><!-->
    <script src="./Stack Cost, Inline, and Compiler Optimization_files/foundation.min.js.download"></script>
    <script>
      $(document).foundation();
    </script>
    <!--<![endif]-->
    <!--[if IE 8]>
    <script src="//content.arduino.cc/legacy/js/foundation_ie8.min.js"></script>
    <script src="//content.arduino.cc/legacy/js/ie8/jquery.foundation.alerts.js"></script>
    <script src="//content.arduino.cc/legacy/js/app.js"></script>
		<![endif]-->
		<script>
		// Adv banner configuration
		var arduinoAdvOptions = {
			breakpointDesktop: 480,
			breakpointMobile: 480,
			zoneIdDesktop: 561,
			zoneIdTablet: 560,
			zoneIdMobile: 560
		};

		jQuery('.boardindex_table .main_container:nth-child(1)').append('<div id="ad_container_zone" class="adv-banner"></div>');
		jQuery('#forumposts form .windowbg:nth-of-type(1)').after('<div id="ad_container_zone" class="adv-banner"></div>');

		</script>
		<!-- Script used by adv banner -->
		<script type="text/javascript" src="./Stack Cost, Inline, and Compiler Optimization_files/postscribe.min.js.download"></script>
		<script type="text/javascript" src="./Stack Cost, Inline, and Compiler Optimization_files/banner.js.download"></script>

</body></html>