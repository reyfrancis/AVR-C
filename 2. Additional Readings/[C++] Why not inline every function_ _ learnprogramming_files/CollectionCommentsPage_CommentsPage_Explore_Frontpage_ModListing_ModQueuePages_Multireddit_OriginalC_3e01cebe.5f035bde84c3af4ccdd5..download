(window.webpackJsonp=window.webpackJsonp||[]).push([["CollectionCommentsPage~CommentsPage~Explore~Frontpage~ModListing~ModQueuePages~Multireddit~OriginalC~3e01cebe"],{"./src/reddit/components/ClassicPost/placeholder.m.less":function(e,t,i){e.exports={thumbnailContainer:"_3cwq18vPueuAxRSrd1foNB",mainBody:"_1jxw1P65tWXN5u8kVHlX-n",content:"_2KR7fLQx_7rIv8QaoeXKZw",emptyScore:"_6w7aNMh3t6UMe07Q6oWFE",emptyVerticalVotes:"_1Xs9oeessHWcuF0VTVxRnl",thumbnail:"_2XOZ5bYpLdswvBAYUNa-ly",title:"n3AVRrP7HOfc0gAtGFpfv",meta:"_1BoNlCqTsaeLXkuZbADxyl",flatlist:"_1IgQuZI8L6A0NcShWmf08y",flatlistExpando:"_2AMaFX8Gwojg29X4_nOnaL",flatlistSeparator:"oljBm1Q059l3l84VHO9VM",flatListItemOne:"_2xeK0Acj_38O5kqiHgp7VC",flatListItemTwo:"_3WphuhFsMSKk2tQyD3fZeI"}},"./src/reddit/components/CompactPost/Placeholder/index.m.less":function(e,t,i){e.exports={emptyScore:"_3RRgbzXvoZ4MUYm45lAqp7",emptyVotes:"_2rSb53hAOWG9j6R_ToxoSJ",wrapper:"_2wuOxz4--LcoxCYSrpCBlx",expandoContainer:"_3CIl2qTD30RwYsMAGO2Y2S",expando:"_2UCpUVZ4aSncQhvkrQW_0i",subredditIconContainer:"_2IJnSguizdehDk_JnTKrdK",topLine:"_1OQE_XsSHzM7AtjVQahjoI",title:"_28eZmJsl2bogBZ2KPmeoFO",meta:"_24dJJDh8muEbehYysONmV1",comments:"_2-iJVRFJK-xC7a7xgBF-T5",ellipsis:"_1IFRAIwzfwChKq85FhLG69",flatList:"_3HxvQvODjYEHa-X5AuQinY"}},"./src/reddit/components/LargePost/placeholder.m.less":function(e,t,i){e.exports={content:"_1yYeg-XN7v7i06TrK8Lh13",emptyVerticalVotes:"_3Qm3gV6v4Y9YWuQgCqMvJr",emptyScore:"y9vamInQ4LrXndusvhkBl",topLine:"_3QuUl4wSXyqVEAkIgGaLXl",topMetaOne:"_3vDeGQp8VifbnDC95HagCL",topMetaTwo:"Nci_4K-inwrSvpM-HSgWy",title:"_1QxTngAAL4xURgv5RVNOq1",media:"_2cFr_UVzM0pQGvZVL2Pmx5",flatlist:"_33_7mRxP4egdr8CL9OMSdb",flatlistItemOne:"_EVV9UvUf3cYf-HtTUL33",flatListItemTwo:"_2Ovk4TwuzZDamFhAj_X5Nl"}},"./src/reddit/components/PostList/Placeholder.tsx":function(e,t,i){"use strict";var s=i("./node_modules/lodash/constant.js"),n=i.n(s),l=i("./node_modules/lodash/times.js"),r=i.n(l),a=i("./node_modules/react/index.js"),o=i.n(a),d=i("./node_modules/react-redux/es/index.js"),h=i("./node_modules/reselect/es/index.js"),c=i("./src/lib/fastdom/index.ts"),p=i("./src/lib/intersectionObserver/index.ts"),m=i("./src/reddit/constants/postLayout.ts"),u=i("./src/lib/classNames/index.ts"),b=i("./src/reddit/components/PostLeftRail/index.tsx"),f=i("./src/reddit/components/VerticalVotes/votes.tsx"),g=i("./src/reddit/contexts/PageLayer/index.tsx"),C=i("./src/reddit/helpers/styles/mixins/loading.ts"),v=i("./src/reddit/models/Vote/index.ts"),I=i("./src/reddit/helpers/styles/mixins/index.m.less"),w=i.n(I),O=i("./src/reddit/components/ClassicPost/placeholder.m.less"),y=i.n(O);const S=Object(g.v)(),x=Object(h.c)({isFakeSubreddit:g.A}),R=Object(d.b)(x),E=e=>{const t={interactive:!1,voteState:v.a.notVoted};return o.a.createElement("div",{className:y.a.emptyVerticalVotes},o.a.createElement(f.d,Object.assign({key:"u"},t)),o.a.createElement("div",{className:y.a.emptyScore,key:"s"}),o.a.createElement(f.c,Object.assign({key:"d"},t)))};var V=S(R(e=>o.a.createElement("div",{className:Object(u.a)(w.a.classicPostStyles,w.a.classicAndCompactPlaceholderStyles)},o.a.createElement(b.b,null,o.a.createElement(E,Object.assign({},e))),o.a.createElement("div",{className:y.a.mainBody},o.a.createElement("div",{className:y.a.thumbnailContainer},o.a.createElement("div",{className:Object(u.a)(y.a.thumbnail,Object(C.c)(e))})),o.a.createElement("div",{className:y.a.content},o.a.createElement("div",{key:"a"},o.a.createElement("div",{key:"aa",className:Object(u.a)(y.a.title,Object(C.c)(e))}),o.a.createElement("div",{key:"ab",className:Object(u.a)(y.a.meta,Object(C.c)(e))})),o.a.createElement("div",{key:"f",className:y.a.flatlist},o.a.createElement("div",{key:"fa",className:Object(u.a)(y.a.flatlistExpando,Object(C.c)(e))}),o.a.createElement("div",{key:"fb",className:y.a.flatlistSeparator}),o.a.createElement("div",{key:"fc",className:Object(u.a)(y.a.flatListItemOne,Object(C.c)(e))}),o.a.createElement("div",{key:"fd",className:Object(u.a)(y.a.flatListItemTwo,Object(C.c)(e))}))))))),T=i("./src/reddit/components/SubredditIcon/index.tsx"),M=i("./src/reddit/components/CompactPost/Placeholder/index.m.less"),j=i.n(M);const F=Object(g.v)(),P=Object(h.c)({isFakeSubreddit:g.A}),k=Object(d.b)(P),H=e=>{const t={interactive:!1,voteState:v.a.notVoted};return o.a.createElement("div",{className:j.a.emptyVotes},o.a.createElement(f.d,Object.assign({key:"u"},t)),o.a.createElement("div",{key:"s",className:j.a.emptyScore}),o.a.createElement(f.c,Object.assign({key:"d"},t)))},N=e=>o.a.createElement(T.a,{className:Object(C.a)(e)}),L=e=>o.a.createElement("div",{className:j.a.flatList},o.a.createElement("div",{className:Object(u.a)(j.a.comments,Object(C.c)(e))}),o.a.createElement("div",{className:Object(u.a)(j.a.ellipsis,Object(C.c)(e))}));var _=F(k(e=>o.a.createElement("div",{className:Object(u.a)(w.a.compactPostStyles,w.a.classicAndCompactPlaceholderStyles)},o.a.createElement("div",{className:j.a.wrapper},o.a.createElement(H,Object.assign({key:"c"},e)),o.a.createElement("div",{key:"a",className:j.a.expandoContainer},o.a.createElement("div",{className:Object(u.a)(j.a.expando,Object(C.a)(e))})),o.a.createElement("div",{key:"d",className:j.a.subredditIconContainer},o.a.createElement(N,{isLoading:!1})),o.a.createElement("div",{key:"e",className:j.a.topLine},o.a.createElement("div",{key:"ea",className:Object(u.a)(j.a.title,Object(C.c)(e))}),o.a.createElement("div",{key:"eb",className:Object(u.a)(j.a.meta,Object(C.c)(e))})),o.a.createElement(L,Object.assign({key:"f"},e)))))),W=i("./src/reddit/components/LargePost/placeholder.m.less"),A=i.n(W),z=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i};const U=Object(g.v)(),K=Object(h.c)({isFakeSubreddit:g.A}),q=Object(d.b)(K),Q=e=>{const t={interactive:!1,voteState:v.a.notVoted};return o.a.createElement("div",{className:A.a.emptyVerticalVotes},o.a.createElement(f.d,Object.assign({key:"u"},t)),o.a.createElement("div",{className:A.a.emptyScore,key:"s"}),o.a.createElement(f.c,Object.assign({key:"d"},t)))},B=e=>{var t=e.isLoading,i=z(e,["isLoading"]);return o.a.createElement(T.b,Object.assign({className:Object(C.a)({isLoading:t})},i))};var X=U(q(e=>{var t=e.className,i=(e.dispatch,e.pageLayer,z(e,["className","dispatch","pageLayer"]));return o.a.createElement("div",{className:Object(u.a)(w.a.baseLargeAndMediumPostStyles,t)},o.a.createElement(b.b,{key:"a"},o.a.createElement(Q,Object.assign({},i))),o.a.createElement("div",{className:A.a.content,key:"b"},o.a.createElement("div",{className:A.a.topLine,key:"ba"},i.isFakeSubreddit&&o.a.createElement(B,{key:"baa",isLoading:!1}),o.a.createElement("div",{key:"bab",className:Object(u.a)(A.a.topMetaOne,Object(C.c)(i))}),o.a.createElement("div",{key:"bac",className:Object(u.a)(A.a.topMetaTwo,Object(C.c)(i))})),o.a.createElement("div",{key:"bb",className:Object(u.a)(A.a.title,Object(C.c)(i))})),o.a.createElement("div",{key:"c",className:Object(u.a)(A.a.media,Object(C.a)(i))}),o.a.createElement("div",{className:A.a.content,key:"d"},o.a.createElement("div",{className:A.a.flatlist},o.a.createElement("div",{className:Object(u.a)(A.a.flatlistItemOne,Object(C.c)(i))}),o.a.createElement("div",{className:Object(u.a)(A.a.flatListItemTwo,Object(C.c)(i))}))))}));const D={[m.f.Large]:[X,2],[m.f.Classic]:[V,10],[m.f.Compact]:[_,30]};var Y=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],s=!0,n=!1,l=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(o){n=!0,l=o}finally{try{!s&&a.return&&a.return()}finally{if(n)throw l}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const Z=.1,J=Object(h.c)({loadingPostComponentForLayout:()=>(function(e){return D[e]})}),G=Object(d.b)(J);t.a=G(class extends o.a.Component{constructor(){super(...arguments),this.mounted=!1,this.state={visible:!1},this.setWrapperRef=(e=>{e!==this.wrapperRef&&(this.wrapperRef&&p.b(this.wrapperRef),e&&p.a(e,this.updateVisibleState)),this.wrapperRef=e}),this.updateVisibleState=(e=>{const t=e.intersectionRatio>=Z;c.a.write(()=>{this.mounted&&this.setState(e=>e.visible!==t?{visible:t}:null)})})}componentDidMount(){document.documentElement.scrollTop=document.body.scrollTop=0,this.mounted=!0}componentWillUnmount(){this.mounted=!1,this.wrapperRef&&p.b(this.wrapperRef)}render(){var e=this.props;const t=e.className,i=e.countOverride,s=e.isLoading,l=e.layout,a=e.loadingPostComponentForLayout,d=this.state.visible;var h=a(l),c=Y(h,2);const p=c[0],m=c[1],u=i||m,b=n()(o.a.createElement(p,{isLoading:s&&d})),f=r()(u,b);return o.a.createElement("div",{className:t,ref:this.setWrapperRef},o.a.Children.toArray(f))}})},"./src/reddit/components/Scroller/Simple.m.less":function(e,t,i){e.exports={Hidden:"wwHbgRV0ZXGp5CHHlpo5u",hidden:"wwHbgRV0ZXGp5CHHlpo5u"}},"./src/reddit/components/Scroller/Simple.tsx":function(e,t,i){"use strict";var s=i("./node_modules/lodash/debounce.js"),n=i.n(s),l=i("./node_modules/lodash/isNil.js"),r=i.n(l),a=i("./node_modules/react/index.js"),o=i.n(a),d=i("./node_modules/react-dom/index.js"),h=i("./node_modules/react-redux/es/index.js"),c=i("./node_modules/request-idle-callback/index.js"),p=i("./node_modules/reselect/es/index.js"),m=i("./src/lib/constants/index.ts"),u=i("./src/lib/fastdom/index.ts"),b=i("./node_modules/lodash/throttle.js"),f=i.n(b);const g=500,C=1e3,v=40;var I;!function(e){e.Max10="0-10",e.Max20="11-20",e.Max30="21-30",e.Max40="31-40",e.Max50="41-50",e.Max60="51-60"}(I||(I={}));const w=()=>({[I.Max10]:0,[I.Max20]:0,[I.Max30]:0,[I.Max40]:0,[I.Max50]:0,[I.Max60]:0}),O=[I.Max10,I.Max20,I.Max30,I.Max40,I.Max50,I.Max60],y=e=>({eventHandler:e});function S({fn:e,subscriber:t,timeout:i}){const s=[];let n,l,r;const a=()=>{if(s.length<v)return;const e=w(),i=Math.min(C,s.length),n=s.splice(0,i);s.splice(0,s.length);const l=n[i-1]-n[0];for(let t=n.shift();n.length>0;t=n.shift()){const i=n[0]-t,s=Math.min(60,Math.ceil(1e3/i));e[s<=10?I.Max10:60===s?I.Max60:O[Math.ceil(s/10)-1]]+=i}const r=w();for(const t in e)r[t]=e[t]/l;t(r)},o=()=>{void 0!==r&&(window.clearTimeout(r),r=void 0)},d=()=>{void 0!==n&&(cancelAnimationFrame(n),n=void 0),void 0!==l&&(window.clearInterval(l),l=void 0),o(),a()},h=()=>{n=requestAnimationFrame(()=>{s.push(performance.now()),h()})},c=f()(()=>{o(),r=window.setTimeout(d,i)},m.H);return{cleanup:d,eventHandler:t=>{void 0===l?(h(),c(),l=window.setInterval(a,g)):c(),e(t)}}}var x=i("./src/lib/scheduler/index.ts"),R=i("./src/lib/domUtils/index.ts"),E=i("./src/lib/LinkedListMap/index.ts");const V=(e,t)=>e<0?t+e:e%t;class T{constructor(e){this.head=0,this.size=0,this.maxSize=e,this.items=new Array(e)}push(e){return this.items[this.head]=e,this.head=V(this.head+1,this.maxSize),this.size<this.maxSize&&this.size++,this}pop(){if(this.size>0){const e=V(this.head-1,this.maxSize),t=this.items[e];return this.items[e]=void 0,this.head=e,this.size--,t}}forEach(e){let t=this.size<this.maxSize?V(this.head-this.size,this.maxSize):this.head;for(let i=0;i<this.size;i++)e(this.items[t],i,this.size),t=(t+1)%this.maxSize}map(e){const t=new Array(this.size);return this.forEach((i,s,n)=>{t[s]=e(i,s,n)}),t}getEntries(){const e=new Array(this.size);return this.forEach((t,i)=>{e[i]=t}),e}clear(){const e=this.size;for(let t=0;t<e;t++)this.pop()}}var M=()=>document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0;class j{constructor({top:e,height:t,heightWithMargin:i}){this.height=t,this.heightWithMargin=i,this.top=e,this.bottom=this.top+this.height}contains(e){return!(e.top<=this.top||e.bottom>=this.bottom)}intersects(e){return!(e.bottom<=this.top||e.top>=this.bottom)}intersectsBorder(e){return e.top<=this.top&&e.bottom>=this.top||e.bottom>=this.bottom&&e.top<=this.bottom}containsTop(e){return!(e.top<this.top||e.top>this.bottom)}isAbove(e){return e.top>this.bottom}isBelow(e){return e.bottom<this.top}}const F=({buffer:e,container:t}={})=>{const i=r()(e)?1e3:e;if("undefined"!=typeof window&&t){const e=t===document?M():t.scrollTop;return new j({top:e,height:window.innerHeight})}return new j({top:0,height:i})};var P=i("./src/reddit/constants/componentSizes.ts"),k=i("./src/reddit/constants/elementClassNames.ts"),H=i("./src/reddit/contexts/InsideOverlay.tsx"),N=i("./src/reddit/selectors/platform.ts"),L=i("./src/telemetry/helpers/sendEvent.ts"),_=i("./src/telemetry/helpers/sendTiming.ts"),W=i("./src/reddit/components/Scroller/Simple.m.less"),A=i.n(W);const z=P.i,U=5*m.H,K=3,q=Object(p.c)({isOverlayOpen:N.i}),Q=Object(h.b)(q),B={};function X(e){let t=0;do{t+=e.offsetTop||0,e=e.offsetParent}while(e);return t}const D=10,Y=.9,Z=.9,J=1.8,G=5,$=1500,ee=2*m.H,te=400,ie=8,se=5*m.H,ne=30,le="object"==typeof performance&&"function"==typeof performance.now,re=()=>le?performance.now():Date.now();function ae(e,t){return E.a.fromArray(e.children.map((e,i)=>{const s=t&&t.get(e.id);return s?(s.isFocusable=!!e.isFocusable,s.trackOnEnteredViewport=e.trackOnEnteredViewport,s.trackOnExitedViewport=e.trackOnExitedViewport,s):{el:null,id:e.id,index:i,isFocusable:!!e.isFocusable,itemRef:void 0,focused:!1,loaded:!t&&i<G,rectangle:void 0,trackOnEnteredViewport:e.trackOnEnteredViewport,trackOnExitedViewport:e.trackOnExitedViewport}}),"id")}t.a=Q(Object(H.b)(class extends o.a.Component{constructor(e){super(e),this.lastRenderPosition=0,this.lastScrollTime=-1,this.resetCanFocusTimer=-1,this.unmountItemsIdleId=null,this.scrollingQuickly=!1,this.visibleChildrenCount=0,this.isRenderableChildrenStateChangePending=!1,this.parentOffsetTop=void 0,this.distanceToTop=void 0,this.measurementsInvalid=!1,this.viewport=void 0,this.mountableViewport=void 0,this.needsToPauseViewportItems=!0,this.updateRenderableChildrenWhenIdleHandle=null,this.requestUpdateWhenIdleCallbackHandle=null,this.pendingScollHandlerRead=null,this.renderableViewport=void 0,this.sendFPSData=(e=>{const t={name:this.props.trackingName};L.b.enqueue(new x.a({args:[e,t],cb:(e,t)=>Object(_.a)(m.l.Redesign,{data:e,meta:t,type:"scrollfps"})}))}),this.getVisibleChildren=(()=>{let e=0;const t=$+(this.props.viewportTopPadding?this.props.viewportTopPadding:0),i=[];let s=this.nextVisibleChildrenIndex;for(;e<t&&s<this.props.children.length;){const t=this.props.children[s];i.push(t),e+=t.estHeight,s++}return this.visibleChildrenCount=i.length,i}),this.setRenderableChildrenIndexIncrement=(()=>{if(this.props.children[0]){const e=this.props.children[0].estHeight;this.renderableChildrenIndexIncrement=Math.min(Math.ceil(te/e),ie)}else this.renderableChildrenIndexIncrement=ie}),this.updateRenderableChildrenWhenIdle=(()=>{this.cancelPopulateRenderableChildrenWhenIdle(),this.hasScrolledWithinThreshold()||(this.timeoutForUpdateIdleCallback=se,Object(c.cancelIdleCallback)(this.requestUpdateWhenIdleCallbackHandle),this.requestUpdateWhenIdleCallbackHandle=Object(c.requestIdleCallback)(()=>{const e=Math.ceil(this.renderableChildrenIndexIncrement/2);this.populateRenderableChildrenFromProps(!1,e)})),this.state.renderableChildren.length<this.props.children.length&&this.schedulePopulateRenderableChildrenWhenIdle()}),this.hasScrolledWithinThreshold=(()=>!!this.lastScrollTime&&re()-this.lastScrollTime<ee),this.populateRenderableChildrenFromProps=((e=!1,t=this.renderableChildrenIndexIncrement,i)=>{const s=i||this.props.children;if(this.state.renderableChildren.length<s.length||e)if(this.hasScrolledWithinThreshold())u.a.read(()=>{clearTimeout(this.updateRenderableChildrenHandle),this.updateRenderableChildrenHandle=setTimeout(()=>{this.populateRenderableChildrenFromProps(e,this.renderableChildrenIndexIncrement,i?s:void 0)},ee)});else{this.nextVisibleChildrenIndex+t<=s.length?this.nextVisibleChildrenIndex+=t:this.nextVisibleChildrenIndex=s.length;const e=s.slice(0,this.nextVisibleChildrenIndex);e.length&&(this.lastVisibleElId=e[e.length-1].id),u.a.write(()=>{this.setState({renderableChildren:e})}),this.isRenderableChildrenStateChangePending=!0}}),this.lastElementIsAboutToBeVisible=(()=>!!(this.lastVisibleEl&&this.lastVisibleEl.getBoundingClientRect().top<window.innerHeight+te)),this.getRenderableChildrenIndexIncrement=((e=ne)=>{let t=0,i=this.state.renderableChildren.length;for(;t<e&&i<this.props.children.length;)t+=this.props.children[i].estHeight,i++;const s=i-this.state.renderableChildren.length;return Math.max(this.renderableChildrenIndexIncrement,s)}),this.schedulePopulateRenderableChildrenWhenIdle=(()=>{!this.props.isOverlayOpen||this.props.isOverlay?this.updateRenderableChildrenWhenIdleHandle=setTimeout(()=>{this.updateRenderableChildrenWhenIdle()},this.timeoutForUpdateIdleCallback):this.cancelPopulateRenderableChildrenWhenIdle()}),this.cancelPopulateRenderableChildrenWhenIdle=(()=>{clearTimeout(this.updateRenderableChildrenWhenIdleHandle),Object(c.cancelIdleCallback)(this.requestUpdateWhenIdleCallbackHandle)}),this.callOnScrollForItemsChanged=n()(()=>{this.handleScroll()},m.H),this.pauseAllElements=(()=>{const e=this.getItemsInViewportWithFilter(this.loadedChildRefFilter),t=[];e.forEach(e=>{const i=e.itemRef;i&&(e.focused=!1,t.push(i.pauseContent))}),u.a.write(()=>{t.forEach(e=>e())})}),this.elementIsVisible=(e=>!!this.viewport&&this.viewport.intersects(e)),this.getItemsInViewportWithFilter=(e=>{this.updateViewportInfo();const t=new E.a("id");return this.state.renderableChildren.forEach(i=>{const s=this.childMap.get(i.id);s&&e(s)&&t.push(s)}),t}),this.visibleChildRefFilter=(e=>{const t=this.getChildRectangle(e);return t&&this.elementIsVisible(t)||!1}),this.loadedChildRefFilter=(e=>e.loaded),this.resetScrollFramerateAndFocus=(()=>{this.scrollContainer&&(this.pixelsPerMSRing.clear(),this.lastScrollTime=-1,this.needsToPauseViewportItems=!0,null===this.unmountItemsIdleId&&(this.unmountItemsIdleId=Object(c.requestIdleCallback)(this.unmountItemsWhileIdle)),setTimeout(this.handleScroll,m.H))}),this.setContainerRef=(e=>{this.containerRef=e,this.props.innerRef&&this.props.innerRef(e)}),this.getChildRectangle=(e=>{const t=e.el;if(!t)return;if(e.rectangle&&!this.measurementsInvalid)return e.rectangle;if(void 0===this.parentOffsetTop){const e=t.offsetParent;this.parentOffsetTop=e.offsetTop;const i=e.getBoundingClientRect().top;this.distanceToTop=i+this.getScrollTop()}const i=t.offsetTop+(this.parentOffsetTop||0),s=t.clientHeight,n=`${t.scrollHeight}px`,l=new j({top:i,height:s,heightWithMargin:n});return e.rectangle=l,l}),this.handleResize=(e=>{this.fpsMeter&&this.fpsMeter.eventHandler(e);for(const t in this.hiddenChildren)this.remeasureWhenShown[t]=!0;this.measurementsInvalid=!0,this.callOnScrollForItemsChanged()}),this.handleScroll=(()=>{this.pendingScollHandlerRead||(this.pendingScollHandlerRead=u.a.read(()=>{if(clearTimeout(this.resetCanFocusTimer),this.cancelPopulateRenderableChildrenWhenIdle(),Object(R.b)()||!this.scrollContainer)return void(this.pendingScollHandlerRead=null);this.updateScrollMetrics();const e=this.getAveragePixelsPerMilliSecond(),t=e<Y,i=e<Z,s=e<J;if(this.scrollContainer&&!this.loadMoreFired&&this.props.onLoadMore){let e=!1;if(void 0!==this.props.loadMoreToken&&void 0!==this.viewport&&this.nextVisibleChildrenIndex>=this.props.children.length){const t=this.containerRef?X(this.containerRef):0;e=!!this.containerRef&&this.containerRef.offsetHeight+t-this.viewport.bottom<=this.viewport.height}if(e){const e=this.props.onLoadMore;setTimeout(e),this.loadMoreFired=!0}}this.populateRenderableChildrenIfLastChildIsVisible();const n=new E.a("id");let l,r;const a=[];this.state.renderableChildren.forEach(e=>{const o=this.childMap.get(e.id);let d;if(o&&o.el){if(!(d=this.getChildRectangle(o)))return;const e=o.id;this.elementIsHideable(d)?void 0===this.hiddenChildren[e]&&(this.childrenToHide[e]=d.heightWithMargin):void 0!==this.hiddenChildren[e]&&(this.childrenToShow[e]=!0)}if(!o||!o.el||!o.rectangle)return void(this.measurementsInvalid&&o&&this.getChildRectangle(o));const h=o.id,c=o.itemRef,p=o.trackOnEnteredViewport,m=!!this.itemsInViewport.get(h);if(this.elementIsUnmountable(d))c&&m&&o.loaded&&o.isFocusable&&a.push(c.pauseContent);else if(c&&this.loadItemIfPossible(o,c,t,i,s,a),this.elementIsVisible(d)){n.push(o),!m&&p&&L.b.enqueue(new x.a({cb:p,args:void 0}));const e=this.elementIsFocused(d);e&&!r&&(r=o.id),t&&o.isFocusable&&!l&&e?(l=o.id,o.focused||(o.focused=!0,c&&a.push(c.focusContent))):o.loaded&&o.isFocusable&&(o.focused||this.needsToPauseViewportItems)&&(o.focused=!1,c&&a.push(c.pauseContent))}else m&&o.loaded&&o.isFocusable&&(o.focused=!1,c&&a.push(c.stopContent))}),u.a.write(()=>{a.forEach(e=>e()),this.props.enableElementHiding&&this.hideOrShowChildren()}),this.itemsInViewport.forEach(({id:e,trackOnExitedViewport:t})=>{t&&!n.has(e)&&L.b.enqueue(new x.a({cb:t,args:[!1]}))}),this.itemsInViewport=n,this.canFocusItems=t,this.focusedChild=l,this.primaryChild=r,this.measurementsInvalid=!1,this.needsToPauseViewportItems=!1,t?null===this.unmountItemsIdleId&&(this.unmountItemsIdleId=Object(c.requestIdleCallback)(this.unmountItemsWhileIdle)):(this.resetCanFocusTimer=setTimeout(this.resetScrollFramerateAndFocus,U),null!==this.unmountItemsIdleId&&(Object(c.cancelIdleCallback)(this.unmountItemsIdleId),this.unmountItemsIdleId=null)),this.props.onScroll&&this.props.onScroll({getVisibleItemsInViewport:()=>this.getItemsInViewportWithFilter(this.visibleChildRefFilter),primaryChild:this.primaryChild?this.childMap.get(this.primaryChild):void 0}),this.timeoutForUpdateIdleCallback=4*se,this.schedulePopulateRenderableChildrenWhenIdle(),this.pendingScollHandlerRead=null}))}),this.unmountItemsWhileIdle=(e=>{if(!this.scrollContainer)return;const t=[];if(this.state.renderableChildren.forEach(e=>{const i=this.childMap.get(e.id);if(!i||!i.el||!i.itemRef)return;const s=this.getChildRectangle(i);s&&this.elementIsUnmountable(s)&&i.loaded&&t.push(i)}),!t.length)return;const i=Math.min(Math.ceil(e.timeRemaining()/K),t.length),s=[];for(let n=0;n<i;n++){const e=t[n];s.push(e.itemRef.unmountContent),e.loaded=!1,e.focused=!1}Object(d.unstable_batchedUpdates)(()=>{this.scrollContainer&&s.forEach(e=>e())}),i<t.length?this.unmountItemsIdleId=Object(c.requestIdleCallback)(this.unmountItemsWhileIdle):this.unmountItemsIdleId=null}),this.hideOrShowChildren=n()(()=>{for(const e in this.childrenToHide){const t=this.childrenToHide[e];void 0!==t&&(this.hideChild(e,t),this.childrenToHide[e]=void 0)}for(const e in this.childrenToShow)void 0!==this.childrenToShow[e]&&(this.showChild(e),this.childrenToShow[e]=void 0)},m.H),this.hideChild=((e,t)=>{const i=this.childMap.get(e);if(!i||!i.el)return;const s=i.el.firstChild;s&&(t!==i.el.style.height&&(i.el.style.height=t),s.classList.add(A.a.Hidden),this.hiddenChildren[e]=`${t}px`,i.loaded&&u.a.write(()=>{i.itemRef&&i.itemRef.unmountContent()}))}),this.showChild=(e=>{const t=this.childMap.get(e);if(!t||!t.el)return;const i=t.el.firstChild;i&&(this.remeasureWhenShown[t.id]&&(this.measurementsInvalid=!0,this.remeasureWhenShown[t.id]=void 0),t.el.style.height=null,i.classList.remove(A.a.Hidden),void 0!==this.hiddenChildren[e]&&(this.hiddenChildren[e]=void 0))}),this.getStylesForOuterWrapper=(e=>{if(void 0!==this.hiddenChildren[e])return{height:this.hiddenChildren[e]}}),this.remeasureChild=(e=>{this.measurementsInvalid=!0}),this.scrollToChild=((e,t)=>{this.measurementsInvalid=!0,u.a.read(()=>{const i=this.childMap.get(e);if(i&&i.el&&this.scrollContainer){if(i.rectangle=void 0,t&&this.isScrollChildTopVisible(e))return;const s=this.getScrollTop()+i.el.getBoundingClientRect().top-(this.props.scrollToChildPadding||0)-(this.props.viewportTopPadding||0);setTimeout(()=>{this.scrollContainer&&(Object(R.c)(this.scrollContainer,s),this.callOnScrollForItemsChanged())},m.H)}})}),this.isScrollChildTopVisible=(e=>{const t=this.childMap.get(e);if(t&&t.el&&this.scrollContainer){var i=this.props,s=i.scrollToChildPadding;const e=void 0===s?0:s;var n=i.viewportTopPadding;const l=void 0===n?0:n,r=window.innerHeight-l,a=t.el.getBoundingClientRect().top;return a>=l+e&&a<r}return!1}),this.childMap=ae(e),this.containerRef=null,this.itemsInViewport=new E.a("id"),this.loadMoreFired=!1,this.pixelsPerMSRing=new T(D),this.wrapperRefFNs={},this.childRefFns={},this.childrenToHide={},this.childrenToShow={},this.canFocusItems=!0,this.focusedChild=void 0,this.hiddenChildren={},this.nextVisibleChildrenIndex=0,this.lastVisibleEl=null,this.lastVisibleElId=null,this.remeasureWhenShown={},this.timeoutForUpdateIdleCallback=se;const t=this.getVisibleChildren();t.length&&(this.lastVisibleElId=t[t.length-1].id),this.nextVisibleChildrenIndex=t.length,this.updateRenderableChildrenHandle=null,this.state={renderableChildren:t},this.setRenderableChildrenIndexIncrement(),this.validateScrollPreservationProps(e),this.validateLoadMoreProps(e)}populateRenderableChildrenIfLastChildIsVisible(){this.isRenderableChildrenStateChangePending||this.state.renderableChildren.length<this.props.children.length&&u.a.read(()=>{if(!this.isRenderableChildrenStateChangePending&&this.lastElementIsAboutToBeVisible()){const e=this.getRenderableChildrenIndexIncrement();this.populateRenderableChildrenFromProps(!1,e)}})}setupScrollHandler(){this.fpsMeter=this.props.trackingName?S({fn:this.handleScroll,subscriber:this.sendFPSData,timeout:U}):y(this.handleScroll),this.scrollContainer&&this.scrollContainer.addEventListener("scroll",this.fpsMeter.eventHandler),window.addEventListener("resize",this.handleResize)}cleanupScrollHandler(){this.fpsMeter&&("function"==typeof this.fpsMeter.cleanup&&this.fpsMeter.cleanup(),this.scrollContainer&&this.scrollContainer.removeEventListener("scroll",this.fpsMeter.eventHandler),window.removeEventListener("resize",this.handleResize),this.pendingScollHandlerRead&&(u.a.clear(this.pendingScollHandlerRead),this.pendingScollHandlerRead=null))}componentDidMount(){this.props.getContainer?this.scrollContainer=this.props.getContainer()||document:this.scrollContainer=document,this.props.onScroll&&this.props.onScroll({getVisibleItemsInViewport:()=>this.getItemsInViewportWithFilter(this.visibleChildRefFilter),primaryChild:void 0}),this.props.disableScrollCache&&!this.props.preventScrollOnMount&&Object(R.c)(this.scrollContainer,0),this.setupScrollHandler(),u.a.write(()=>{if(!this.props.disableScrollCache){const e=this.getCacheKey(),t=B[e];r()(t)||(B[e]=void 0,this.scrollContainer&&Object(R.c)(this.scrollContainer,t))}this.callOnScrollForItemsChanged(),this.props.onLastVisibleChildRendered&&this.props.onLastVisibleChildRendered()}),this.schedulePopulateRenderableChildrenWhenIdle()}componentDidUpdate(e){if(this.isRenderableChildrenStateChangePending=!1,this.measurementsInvalid=!0,this.scrollTargetId&&(this.scrollToChild(this.scrollTargetId,!1),this.scrollTargetId=void 0),this.didLayoutAloneChange(e,this.props)){this.callExitedViewportForUnmount(),this.focusedChild=void 0,this.childrenToShow={},this.childrenToHide={},this.hiddenChildren={},this.childMap.forEach(e=>{e.loaded=!1,e.focused=!1}),this.setRenderableChildrenIndexIncrement(),this.populateRenderableChildrenFromProps(!0),this.callOnScrollForItemsChanged();const e=this.getVisibleChildren();this.visibleChildrenCount=e.length,this.schedulePopulateRenderableChildrenWhenIdle()}this.populateRenderableChildrenIfLastChildIsVisible(),e.trackingName!==this.props.trackingName&&(this.cleanupScrollHandler(),this.setupScrollHandler())}shouldComponentUpdate(e){return e.isOverlayOpen===this.props.isOverlayOpen}componentWillReceiveProps(e){this.validateScrollPreservationProps(e)&&this.validateLoadMoreProps(e)&&this.didLayoutAloneChange(this.props,e)&&this.hasBeenScrolled()&&this.handleScroll(),e.loadMoreToken!==this.props.loadMoreToken&&(this.loadMoreFired=!1,this.loadMoreEl=null),e.isOverlayOpen!==this.props.isOverlayOpen&&e.isOverlayOpen&&!this.props.isOverlay&&u.a.read(this.pauseAllElements),e.isOverlayOpen===this.props.isOverlayOpen||e.isOverlayOpen||this.props.isOverlay||this.resetScrollFramerateAndFocus(),this.childMap=ae(e,this.childMap);const t=e.children.length<this.props.children.length,i=e.children.length===this.props.children.length&&e.children.some((e,t)=>e.id!==this.props.children[t].id);this.populateRenderableChildrenFromProps(t||i,this.renderableChildrenIndexIncrement,e.children),this.schedulePopulateRenderableChildrenWhenIdle()}componentWillUnmount(){if(this.callExitedViewportForUnmount(),this.cleanupScrollHandler(),clearTimeout(this.updateRenderableChildrenHandle),this.cancelPopulateRenderableChildrenWhenIdle(),this.scrollContainer&&!this.props.disableScrollCache){const e=this.getCacheKey();B[e]=this.lastRenderPosition}this.childMap=new E.a("id"),this.itemsInViewport=new E.a("id"),this.wrapperRefFNs={},this.childRefFns={},this.containerRef=null,this.loadMoreEl=void 0,this.scrollContainer=void 0,this.unmountItemsIdleId&&(Object(c.cancelIdleCallback)(this.unmountItemsIdleId),this.unmountItemsIdleId=null)}didLayoutAloneChange(e,t){return"string"==typeof e.layoutKey&&"string"==typeof t.layoutKey&&e.layoutKey!==t.layoutKey&&"string"==typeof e.dataKey&&"string"==typeof t.layoutKey&&e.dataKey===t.dataKey}elementIsFocused(e){if(!this.viewport)return!1;const t=this.distanceToTop?this.distanceToTop:0,i=this.parentOffsetTop?this.parentOffsetTop:0,s=e.bottom+t-i,n=e.top+t-i,l=Math.min(this.viewport.bottom,s)-Math.max(this.viewport.top,n),r=l/e.height,a=l/this.viewport.height;return r>.75||a>.9}getFirstItemInViewport(){for(const e of this.props.children){const t=e.id,i=this.childMap.get(t);if(i){const e=this.getChildRectangle(i);if(e&&this.elementIsVisible(e))return i}}}elementIsUnmountable(e){return!!this.mountableViewport&&!this.mountableViewport.intersects(e)}elementIsHideable(e){return!!this.renderableViewport&&!this.renderableViewport.intersects(e)}getCacheKey(){return this.props.children.map(e=>e.id).join("-")}getScrollTop(){return this.scrollContainer?this.scrollContainer===document?M():this.scrollContainer.scrollTop:0}updateViewportInfo(){if(this.scrollContainer){this.viewport=F({buffer:0,container:this.scrollContainer});var e=this.props.viewportTopPadding;const t=void 0===e?0:e,i=window.innerHeight-t,s=2*i;this.mountableViewport=new j({top:this.viewport.top-s,height:this.viewport.height+2*s});const n=4*i;this.renderableViewport=new j({top:this.viewport.top-n,height:this.viewport.height+2*n})}}updateScrollMetrics(){this.updateViewportInfo();const e=re(),t=this.getScrollTop(),i=Math.abs(this.lastRenderPosition-t),s=e-this.lastScrollTime,n=this.lastScrollTime>-1;this.lastScrollTime=e,this.lastRenderPosition=t,n?this.pixelsPerMSRing.push(i/s):this.lastScrollTime=e}getAveragePixelsPerMilliSecond(){if(this.pixelsPerMSRing.size>1){let e=0;return this.pixelsPerMSRing.forEach(t=>e+=t),e/this.pixelsPerMSRing.size}return 0}_wrapperRefFN(e,t){const i=this.childMap.get(e);i&&(i.el=t),this.lastVisibleElId===e&&(this.lastVisibleEl=t)}getWrapperRefFN(e){let t=this.wrapperRefFNs[e];return t||(t=(t=>{this._wrapperRefFN(e,t)}),this.wrapperRefFNs[e]=t),t}_childRefFn(e,t,i){const s=this.childMap.get(e);s&&(s.itemRef=t,s.loaded=!!t&&(void 0!==i?i:s.loaded),this.callOnScrollForItemsChanged())}getChildRefFn(e){let t=this.childRefFns[e];return t||(t=((t,i)=>{this._childRefFn(e,t,i)}),this.childRefFns[e]=t),t}loadItemIfPossible(e,t,i,s,n,l){if(t.contentIsHeavyToMount()?s:n){const s=!e.isFocusable||i;!e.loaded&&s&&(e.loaded=!0,l.push(t.loadContent))}}callExitedViewportForUnmount(){this.itemsInViewport.forEach(({id:e,trackOnExitedViewport:t})=>{t&&L.b.enqueue(new x.a({cb:t,args:[!0]}))})}hasBeenScrolled(){if(!this.containerRef)return!1;var e=this.props.viewportTopPadding;const t=void 0===e?0:e,i=X(this.containerRef);return this.getScrollTop()+t-i>0}render(){return o.a.createElement("div",{className:this.props.className,ref:this.setContainerRef},this.state.renderableChildren.map((e,t)=>o.a.createElement("div",{key:`scroller-${e.id}`,ref:this.getWrapperRefFN(e.id),style:this.getStylesForOuterWrapper(e.id)},o.a.createElement("div",{className:this.hiddenChildren[e.id]?A.a.Hidden:void 0},e.render({className:k.h,height:e.estHeight,placeholderRecommended:!1,remeasure:this.remeasureChild,scrollToAndRemeasure:this.scrollToChild,setScrollerChildRef:this.getChildRefFn(e.id),shouldLoadInitially:t<G,width:z})))))}validateScrollPreservationProps(e){return"string"!=typeof e.layoutKey||void 0!==e.dataKey}validateLoadMoreProps(e){return void 0===e.onLoadMore||"loadMoreToken"in e}}))},"./src/reddit/connectors/connectToLanguage.ts":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var s=i("./node_modules/react-redux/es/index.js"),n=i("./node_modules/reselect/es/index.js"),l=i("./src/reddit/selectors/user.ts");const r=Object(n.c)({language:l.S});function a(e){return Object(s.b)(r)(e)}}}]);
//# sourceMappingURL=CollectionCommentsPage~CommentsPage~Explore~Frontpage~ModListing~ModQueuePages~Multireddit~OriginalC~3e01cebe.5f035bde84c3af4ccdd5.js.map